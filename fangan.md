
#  v1.3 å…«å­—æ’ç›˜ç³»ç»Ÿæ–¹æ¡ˆ
**åŸºäºæ—ºè¡°æ³•ä¸ºä¸»ï¼Œæ ¼å±€æ³•ä¸ºè¾… | ç®—æ³•+LLMæ··åˆæ¶æ„**

---

## è®¾è®¡ç†å¿µ

### æ ¸å¿ƒå®šä½
- **ç›®æ ‡ç”¨æˆ·ï¼š** æ™®é€šå¤§ä¼—ï¼ˆä¸æ‡‚å‘½ç†æœ¯è¯­ï¼‰
- **è¾“å‡ºé£æ ¼ï¼š** ç™½è¯è¡¨è¾¾ï¼Œé¿å…ä¸“ä¸šæœ¯è¯­
- **æŠ€æœ¯æ¶æ„ï¼š** ç¡®å®šæ€§è®¡ç®—ç”¨ç®—æ³•ï¼Œç»¼åˆåˆ¤æ–­ç”¨LLM
- **ç†è®ºä½“ç³»ï¼š** æ—ºè¡°æ³•ä¸ºä¸»ï¼ˆé€‚ç”¨æ‰€æœ‰äººï¼‰ï¼Œæ ¼å±€æ³•ä¸ºè¾…ï¼ˆ10%èƒ½å…¥æ ¼è€…ï¼‰
- **ç†è®ºä¾æ®ï¼š** ä»¥ã€Šæ¸Šæµ·å­å¹³ã€‹ã€Šä¸‰å‘½é€šä¼šã€‹ã€Šç©·é€šå®é‰´ã€‹ä¸ºæ ¸å¿ƒç»å…¸

### å‘½ç†é€»è¾‘
```
äº”è¡Œæ—ºè¡°ï¼ˆåŸºç¡€ï¼‰ â†’ æ—¥ä¸»å¼ºå¼±ï¼ˆæ ¸å¿ƒï¼‰ â†’ å–ç”¨ç¥ï¼ˆå…³é”®ï¼‰ â†’ æ ¼å±€è¯†åˆ«ï¼ˆè¾…åŠ©ï¼‰ â†’ å¤§è¿æµå¹´ï¼ˆé¢„æµ‹ï¼‰
```

---

## ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®é¢„å¤„ç†ä¸å››æŸ±æ’ç›˜

### æ¨¡å—1.1ï¼šè¾“å…¥ä¿¡æ¯é‡‡é›†

**å¿…å¡«é¡¹ï¼š**
```json
{
  "birth_date": "1984-11-07",
  "birth_time": "22:30",
  "gender": "ç”·",
  "location": {
    "province": "åŒ—äº¬",
    "city": "åŒ—äº¬",
    "longitude": 116.4,
    "latitude": 39.9
  }
}
```

---

### æ¨¡å—1.2ï¼šçœŸå¤ªé˜³æ—¶æ ¡æ­£ âœ… ç®—æ³•å®ç°

**ä¸ºä»€ä¹ˆéœ€è¦çœŸå¤ªé˜³æ—¶ï¼Ÿ**
å¤ä»£ç”¨æ—¥æ™·çœ‹æ—¶é—´ï¼Œæ²¡æœ‰ç»Ÿä¸€æ—¶åŒºæ¦‚å¿µã€‚ç°ä»£ç”¨åŒ—äº¬æ—¶é—´ï¼ˆä¸œç»120Â°æ ‡å‡†æ—¶ï¼‰ï¼Œä½†ä¸­å›½ä¸œè¥¿è·¨åº¦å¤§ï¼Œå®é™…å¤ªé˜³æ—¶é—´å·®å¼‚å¯è¾¾4å°æ—¶ã€‚

**è®¡ç®—å…¬å¼ï¼š**
```
çœŸå¤ªé˜³æ—¶ = åŒ—äº¬æ—¶é—´ + ç»åº¦æ—¶å·® + å‡æ—¶å·®

å…¶ä¸­ï¼š
- ç»åº¦æ—¶å·® = (å½“åœ°ç»åº¦ - 120Â°) Ã— 4åˆ†é’Ÿ
  ä¸œç»>120Â°ä¸ºæ­£ï¼Œ<120Â°ä¸ºè´Ÿ
  
- å‡æ—¶å·®(Equation of Time)ï¼š
  åœ°çƒå…¬è½¬è½¨é“æ˜¯æ¤­åœ†ï¼ŒçœŸå¤ªé˜³ä¸å¹³å¤ªé˜³æ¯å¤©æœ‰Â±16åˆ†é’Ÿå·®å¼‚
  éœ€æŸ¥å¤©æ–‡å†è¡¨æˆ–ç”¨å…¬å¼è®¡ç®—
```

**å®ç°ç¤ºä¾‹ï¼š**
```python
def calculate_true_solar_time(beijing_time, longitude):
    """
    è®¡ç®—çœŸå¤ªé˜³æ—¶
    
    Args:
        beijing_time: datetimeå¯¹è±¡ï¼ŒåŒ—äº¬æ—¶é—´
        longitude: floatï¼Œå‡ºç”Ÿåœ°ç»åº¦
    
    Returns:
        datetimeå¯¹è±¡ï¼ŒçœŸå¤ªé˜³æ—¶
    """
    # ç»åº¦æ—¶å·®
    longitude_offset = (longitude - 120) * 4  # åˆ†é’Ÿ
    
    # å‡æ—¶å·®ï¼ˆéœ€è¦ç”¨å¤©æ–‡ç®—æ³•è®¡ç®—ï¼‰
    equation_of_time = calculate_equation_of_time(beijing_time)
    
    # åˆæˆ
    true_solar_time = beijing_time + timedelta(
        minutes=longitude_offset + equation_of_time
    )
    
    return true_solar_time
```

---

### æ¨¡å—1.3ï¼šå¤ä»¤æ—¶å¤„ç† âœ… ç®—æ³•å®ç°

**å†å²èƒŒæ™¯ï¼š**
ä¸­å›½åœ¨1986-1991å¹´å®è¡Œè¿‡å¤ä»¤æ—¶ï¼Œè¿™æœŸé—´å‡ºç”Ÿçš„äººéœ€è¦å‡å»1å°æ—¶ã€‚

**è§„åˆ™è¡¨ï¼š**
```python
DAYLIGHT_SAVING_PERIODS = [
    ("1986-05-04", "1986-09-14"),
    ("1987-04-12", "1987-09-13"),
    ("1988-04-10", "1988-09-11"),
    ("1989-04-16", "1989-09-17"),
    ("1990-04-15", "1990-09-16"),
    ("1991-04-14", "1991-09-15"),
]

def adjust_daylight_saving(beijing_time):
    """æ£€æŸ¥å¹¶è°ƒæ•´å¤ä»¤æ—¶"""
    for start, end in DAYLIGHT_SAVING_PERIODS:
        if start <= beijing_time.date().isoformat() <= end:
            return beijing_time - timedelta(hours=1)
    return beijing_time
```

---

### æ¨¡å—1.4ï¼šå­æ—¶å½’å±å¤„ç† âœ… ç®—æ³•å®ç°

**é‡‡ç”¨ä¸»æµç®—æ³•ï¼ˆã€Šå­å¹³çœŸè¯ ã€‹æ´¾ï¼‰ï¼š**
23:00-24:00ç®—æ¬¡æ—¥å­æ—¶


**å®ç°é€»è¾‘ï¼š**
```python
def handle_zi_time(true_solar_time):
    """
    å­æ—¶å½’å±å¤„ç†
    
    é‡‡ç”¨ä¸»æµç®—æ³•ï¼š23:00åç®—æ¬¡æ—¥
    """
    hour = true_solar_time.hour
    
    if 23 <= hour < 24:
        adjusted_time = true_solar_time + timedelta(days=1)
        return {
            "datetime": adjusted_time,
            "note": "âš ï¸ å­æ—¶å½’å±è¯´æ˜ï¼šæœ¬ç³»ç»Ÿé‡‡ç”¨ä¸»æµç®—æ³•ï¼Œ23:00åç®—ä½œæ¬¡æ—¥ã€‚å¦‚å¯¹æ—¶è¾°æœ‰ç–‘é—®ï¼Œå»ºè®®é€šè¿‡é‡å¤§äº‹ä»¶éªŒè¯ã€‚"
        }
    return {"datetime": true_solar_time, "note": None}
```

---

### æ¨¡å—1.5ï¼šèŠ‚æ°”ç²¾ç¡®è®¡ç®— âœ… ç®—æ³•å®ç°

**èŠ‚æ°”çš„ä½œç”¨ï¼š**
- **å¹´æŸ±åˆ†ç•Œï¼š** ä»¥ç«‹æ˜¥ä¸ºç•Œï¼ˆä¸æ˜¯å…¬å†1æœˆ1æ—¥ï¼Œä¹Ÿä¸æ˜¯å†œå†æ­£æœˆåˆä¸€ï¼‰
- **æœˆæŸ±åˆ†ç•Œï¼š** ä»¥åäºŒèŠ‚ä¸ºç•Œï¼ˆç«‹æ˜¥ã€æƒŠè›°ã€æ¸…æ˜...ï¼‰

**24èŠ‚æ°”ä¸æœˆä»½å¯¹ç…§ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èŠ‚ï¼ˆç«‹æœˆï¼‰â”‚ åœ°æ”¯  â”‚ æ°”ï¼ˆä¸ç”¨ï¼‰ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç«‹æ˜¥     â”‚ å¯…æœˆ  â”‚ é›¨æ°´      â”‚
â”‚ æƒŠè›°     â”‚ å¯æœˆ  â”‚ æ˜¥åˆ†      â”‚
â”‚ æ¸…æ˜     â”‚ è¾°æœˆ  â”‚ è°·é›¨      â”‚
â”‚ ç«‹å¤     â”‚ å·³æœˆ  â”‚ å°æ»¡      â”‚
â”‚ èŠ’ç§     â”‚ åˆæœˆ  â”‚ å¤è‡³      â”‚
â”‚ å°æš‘     â”‚ æœªæœˆ  â”‚ å¤§æš‘      â”‚
â”‚ ç«‹ç§‹     â”‚ ç”³æœˆ  â”‚ å¤„æš‘      â”‚
â”‚ ç™½éœ²     â”‚ é…‰æœˆ  â”‚ ç§‹åˆ†      â”‚
â”‚ å¯’éœ²     â”‚ æˆŒæœˆ  â”‚ éœœé™      â”‚
â”‚ ç«‹å†¬     â”‚ äº¥æœˆ  â”‚ å°é›ª      â”‚
â”‚ å¤§é›ª     â”‚ å­æœˆ  â”‚ å†¬è‡³      â”‚
â”‚ å°å¯’     â”‚ ä¸‘æœˆ  â”‚ å¤§å¯’      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é‡è¦ï¼šåªæœ‰"èŠ‚"ç”¨äºåˆ’åˆ†æœˆä»½ï¼Œ"æ°”"ä¸ç”¨ï¼
```

**å®ç°æ–¹å¼ï¼š**
ä½¿ç”¨å¯¿æ˜Ÿå¤©æ–‡å†ç®—æ³•æˆ–æŸ¥è¯¢å¤©æ–‡æ•°æ®åº“ï¼Œç²¾ç¡®è®¡ç®—èŠ‚æ°”æ—¶åˆ»ï¼ˆç²¾ç¡®åˆ°åˆ†é’Ÿï¼‰ã€‚

---

### æ¨¡å—1.6ï¼šå››æŸ±æ’ç›˜ âœ… ç®—æ³•å®ç°

#### å¹´æŸ±æ¨ç®—

**è§„åˆ™ï¼š** ä»¥ç«‹æ˜¥ä¸ºåˆ†ç•Œ

```python
def get_year_pillar(true_solar_time, lichun_time):
    """
    è·å–å¹´æŸ±
    
    Args:
        true_solar_time: çœŸå¤ªé˜³æ—¶
        lichun_time: å½“å¹´ç«‹æ˜¥æ—¶åˆ»
    """
    birth_year = true_solar_time.year
    
    if true_solar_time < lichun_time:
        # å‡ºç”Ÿåœ¨ç«‹æ˜¥ä¹‹å‰ï¼Œç”¨ä¸Šä¸€å¹´
        return get_ganzhi(birth_year - 1)
    else:
        # å‡ºç”Ÿåœ¨ç«‹æ˜¥ä¹‹åï¼Œç”¨å½“å¹´
        return get_ganzhi(birth_year)
```

#### æœˆæŸ±æ¨ç®—

**è§„åˆ™ï¼š** ä»¥åäºŒèŠ‚ä¸ºåˆ†ç•Œ + äº”è™éæœˆæ³•

```python
def wuhu_dun(year_gan, month_zhi):
    """
    äº”è™éæœˆæ³•
    
    å£è¯€ï¼š
    ç”²å·±ä¹‹å¹´ä¸™ä½œé¦–ï¼Œä¹™åºšä¹‹å²æˆŠä¸ºå¤´
    ä¸™è¾›å¿…å®šå¯»åºšèµ·ï¼Œä¸å£¬å£¬ä½é¡ºè¡Œæµ
    è‹¥é—®æˆŠç™¸ä½•æ–¹å‘ï¼Œç”²å¯…ä¹‹ä¸Šå¥½è¿½æ±‚
    """
    start_gan_map = {
        'ç”²': 'ä¸™', 'å·±': 'ä¸™',
        'ä¹™': 'æˆŠ', 'åºš': 'æˆŠ',
        'ä¸™': 'åºš', 'è¾›': 'åºš',
        'ä¸': 'å£¬', 'å£¬': 'å£¬',
        'æˆŠ': 'ç”²', 'ç™¸': 'ç”²'
    }
    
    # ä»å¯…æœˆå¼€å§‹é¡ºæ¨
    return calculate_month_gan(start_gan_map[year_gan], month_zhi)
```

#### æ—¥æŸ±æ¨ç®—

**æ–¹æ³•ï¼š** æŸ¥ä¸‡å¹´å†æˆ–ä½¿ç”¨è”¡å‹’å…¬å¼è®¡ç®—

#### æ—¶æŸ±æ¨ç®—

**è§„åˆ™ï¼š** äº”é¼ éæ—¶æ³•

```python
def wushu_dun(day_gan, hour_zhi):
    """
    äº”é¼ éæ—¶æ³•
    
    å£è¯€ï¼š
    ç”²å·±è¿˜åŠ ç”²ï¼Œä¹™åºšä¸™ä½œåˆ
    ä¸™è¾›ä»æˆŠèµ·ï¼Œä¸å£¬åºšå­å±…
    æˆŠç™¸ä½•æ–¹å‘ï¼Œå£¬å­æ˜¯çœŸé€”
    """
    start_gan_map = {
        'ç”²': 'ç”²', 'å·±': 'ç”²',
        'ä¹™': 'ä¸™', 'åºš': 'ä¸™',
        'ä¸™': 'æˆŠ', 'è¾›': 'æˆŠ',
        'ä¸': 'åºš', 'å£¬': 'åºš',
        'æˆŠ': 'å£¬', 'ç™¸': 'å£¬'
    }
    
    return calculate_hour_gan(start_gan_map[day_gan], hour_zhi)
```

---

### æ¨¡å—1.7ï¼šåœ°æ”¯è—å¹²å±•å¼€ âœ… ç®—æ³•å®ç°ï¼ˆä¿®æ­£ç‰ˆï¼‰

**ğŸ”§ å¸ä»¤æ—¥æœŸæ³•**

**æ ‡å‡†è—å¹²è¡¨ï¼ˆä»…æ ‡æ³¨å­˜åœ¨å“ªäº›è—å¹²ï¼‰ï¼š**
```python
HIDDEN_STEMS = {
    "å­": ["ç™¸", "å£¬"],
    "ä¸‘": ["å·±", "ç™¸", "è¾›"],
    "å¯…": ["ç”²", "ä¸™", "æˆŠ"],
    "å¯": ["ä¹™"],
    "è¾°": ["æˆŠ", "ä¹™", "ç™¸"],
    "å·³": ["ä¸™", "æˆŠ", "åºš"],
    "åˆ": ["ä¸", "å·±"],
    "æœª": ["å·±", "ä¸", "ä¹™"],
    "ç”³": ["åºš", "å£¬", "æˆŠ"],
    "é…‰": ["è¾›"],
    "æˆŒ": ["æˆŠ", "è¾›", "ä¸"],
    "äº¥": ["å£¬", "ç”²"]
}
```

**è¯´æ˜ï¼š**
- æ­¤è¡¨åªç”¨äºæ ‡æ³¨"åœ°æ”¯ä¸­è—æœ‰å“ªäº›å¤©å¹²"
---

### æ¨¡å—1.8ï¼šé€å¹²æ£€æµ‹ âœ… ç®—æ³•å®ç°
```python
def check_tougan(month_zhi, all_gans, day_gan):
    """
    æ£€æµ‹æœˆä»¤è—å¹²æ˜¯å¦é€å‡ºå¤©å¹²
    
    ã€å‘½ç†åŸç†ã€‘
    æ ¼å±€æ³•çš„æ ¸å¿ƒåˆ¤æ–­ä¾æ®ï¼š
    - æœˆä»¤è—å¹²é€å‡ºå¤©å¹²ï¼Œåˆ™ä»¥é€å‡ºä¹‹ç¥å®šæ ¼å±€
    - å¤šä¸ªè—å¹²éƒ½é€ï¼Œå–å¸ä»¤ç¥
    - éƒ½ä¸é€ï¼Œå–æœ¬æ°”ï¼ˆå¸ä»¤ç¥ï¼‰
    
    Args:
        month_zhi: æœˆæ”¯
        all_gans: å››æŸ±å¤©å¹²åˆ—è¡¨ [å¹´å¹², æœˆå¹², æ—¥å¹², æ—¶å¹²]
        day_gan: æ—¥ä¸»ï¼ˆç”¨äºæ’é™¤æ—¥å¹²æœ¬èº«ï¼‰
    
    Returns:
        {
            "month_zhi": "äº¥",
            "hidden_stems": ["å£¬", "ç”²"],
            "tougan_analysis": {
                "å£¬": {
                    "positions": [],
                    "is_tougan": False,
                    "shishen": "ä¸ƒæ€"
                },
                "ç”²": {
                    "positions": ["å¹´å¹²"],
                    "is_tougan": True,
                    "shishen": "åå°"
                }
            },
            "pattern_hint": "æœˆä»¤ç”²æœ¨é€äºå¹´å¹²ï¼Œå¯å–åå°æ ¼"
        }
    """
    hidden_stems = HIDDEN_STEMS[month_zhi]
    tougan_analysis = {}
    
    pillar_names = ["å¹´å¹²", "æœˆå¹²", "æ—¥å¹²", "æ—¶å¹²"]
    
    for cang_gan in hidden_stems:
        # æ’é™¤æ—¥å¹²æœ¬èº«ï¼ˆä¸ç®—é€å¹²ï¼‰
        if cang_gan == day_gan:
            positions = []
        else:
            positions = [
                pillar_names[i] 
                for i, gan in enumerate(all_gans) 
                if gan == cang_gan and i != 2  # ä¸åŒ…æ‹¬æ—¥æŸ±ä½ç½®
            ]
        
        tougan_analysis[cang_gan] = {
            "positions": positions,
            "is_tougan": len(positions) > 0,
            "shishen": get_shishen(day_gan, cang_gan)
        }
    
    # ç”Ÿæˆæ ¼å±€æç¤º
    tougan_list = [
        f"{stem}({info['shishen']})" 
        for stem, info in tougan_analysis.items() 
        if info["is_tougan"]
    ]
    
    if tougan_list:
        pattern_hint = f"æœˆä»¤{'ã€'.join(tougan_list)}é€å¹²ï¼Œéœ€ç»“åˆå¸ä»¤ç¥ç¡®å®šæ ¼å±€"
    else:
        pattern_hint = "æœˆä»¤è—å¹²å‡æœªé€å‡ºï¼ŒæŒ‰å¸ä»¤ç¥å®šæ ¼å±€"
    
    return {
        "month_zhi": month_zhi,
        "hidden_stems": hidden_stems,
        "tougan_analysis": tougan_analysis,
        "pattern_hint": pattern_hint
    }
```


---

### æ¨¡å—1.9ï¼šåç¥æ ‡æ³¨ âœ… ç®—æ³•å®ç°ï¼ˆåå°ç”¨ï¼‰

**åç¥å®šä¹‰ï¼š** æ—¥å¹²ä¸å…¶ä»–å¤©å¹²çš„äº”è¡Œç”Ÿå…‹å…³ç³»

**é‡è¦è¯´æ˜ï¼š** 
- åç¥åœ¨åå°æ ‡æ³¨ï¼Œä¾›LLMæ¨ç†ä½¿ç”¨
- **ä¸æ˜¾ç¤ºç»™ç”¨æˆ·**ï¼ˆåˆæœŸéšè—ä¸“ä¸šæœ¯è¯­ï¼‰
- æœªæ¥å¯ä»¥ä½œä¸º"ä¸“ä¸šæ¨¡å¼"å¯é€‰åŠŸèƒ½

```python
def mark_shishen(bazi_data):
    """
    æ ‡æ³¨åç¥ï¼ˆä»…åå°ä½¿ç”¨ï¼Œä¸æ˜¾ç¤ºç»™ç”¨æˆ·ï¼‰
    
    Returns:
        {
            "å¹´å¹²ç”²æœ¨": "æ­£å°",
            "æœˆå¹²ä¹™æœ¨": "åå°",
            "æ—¶å¹²å·±åœŸ": "ä¼¤å®˜",
            "äº¥è—å£¬æ°´": "æ­£å®˜",
            "äº¥è—ç”²æœ¨": "æ­£å°"
        }
    """
    day_gan = bazi_data.day_gan
    shishen_map = {}
    
    # æ ‡æ³¨å¤©å¹²åç¥
    for pillar_name, gan in [("å¹´å¹²", bazi_data.year_gan), 
                             ("æœˆå¹²", bazi_data.month_gan),
                             ("æ—¶å¹²", bazi_data.hour_gan)]:
        if gan != day_gan:
            shishen_map[f"{pillar_name}{gan}"] = get_shishen(day_gan, gan)
    
    # æ ‡æ³¨åœ°æ”¯è—å¹²åç¥
    for zhi_name, zhi in [("å¹´æ”¯", bazi_data.year_zhi),
                          ("æœˆæ”¯", bazi_data.month_zhi),
                          ("æ—¥æ”¯", bazi_data.day_zhi),
                          ("æ—¶æ”¯", bazi_data.hour_zhi)]:
        for cang_gan in HIDDEN_STEMS[zhi]:
            if cang_gan != day_gan:
                shishen_map[f"{zhi_name}{zhi}è—{cang_gan}"] = get_shishen(day_gan, cang_gan)
    
    return shishen_map
```

---

### æ¨¡å—1.10ï¼šåˆ‘å†²åˆå®³æ£€æµ‹ï¼ˆæ‰©å……ç‰ˆï¼‰âœ… ç®—æ³•å®ç°

**ğŸ”§ é‡è¦æ‰©å……ï¼šå¢åŠ ä¸‰åˆ‘ã€å…­å®³æ£€æµ‹**

```python
def detect_interactions(bazi_pillars):
    """
    æ£€æµ‹åˆ‘å†²åˆå®³ï¼ˆæ ‡æ³¨å­˜åœ¨æ€§å’Œä½ç½®ï¼Œä¸è®¡ç®—åŠ›åº¦ï¼‰
    
    æ£€æµ‹å†…å®¹ï¼š
    1. å…­å†²
    2. å…­åˆ
    3. ä¸‰åˆ
    4. ä¸‰åˆ‘ï¼ˆæ–°å¢ï¼‰
    5. å…­å®³ï¼ˆæ–°å¢ï¼‰
    
    Returns:
        [
            {
                "type": "å…­å†²",
                "zhi1": "å­",
                "zhi2": "åˆ",
                "position1": "å¹´æ”¯",
                "position2": "æ—¥æ”¯",
                "involved_pillars": ["å¹´æŸ±", "æ—¥æŸ±"],
                "note": "å¹´æ”¯ä¸æ—¥æ”¯ç›¸å†²"
            },
            ...
        ]
    """
    interactions = []
    
    pillars = [
        {"name": "å¹´æŸ±", "position": "å¹´æ”¯", "zhi": bazi_pillars.year_zhi},
        {"name": "æœˆæŸ±", "position": "æœˆæ”¯", "zhi": bazi_pillars.month_zhi},
        {"name": "æ—¥æŸ±", "position": "æ—¥æ”¯", "zhi": bazi_pillars.day_zhi},
        {"name": "æ—¶æŸ±", "position": "æ—¶æ”¯", "zhi": bazi_pillars.hour_zhi},
    ]
    
    # å…­å†²æ£€æµ‹
    LIUCHONG = {
        'å­': 'åˆ', 'åˆ': 'å­',
        'ä¸‘': 'æœª', 'æœª': 'ä¸‘',
        'å¯…': 'ç”³', 'ç”³': 'å¯…',
        'å¯': 'é…‰', 'é…‰': 'å¯',
        'è¾°': 'æˆŒ', 'æˆŒ': 'è¾°',
        'å·³': 'äº¥', 'äº¥': 'å·³'
    }
    
    for i in range(len(pillars)):
        for j in range(i+1, len(pillars)):
            p1, p2 = pillars[i], pillars[j]
            
            if LIUCHONG.get(p1["zhi"]) == p2["zhi"]:
                interactions.append({
                    "type": "å…­å†²",
                    "zhi1": p1["zhi"],
                    "zhi2": p2["zhi"],
                    "position1": p1["position"],
                    "position2": p2["position"],
                    "involved_pillars": [p1["name"], p2["name"]],
                    "note": f"{p1['position']}ä¸{p2['position']}ç›¸å†²"
                })
    
    # å…­åˆæ£€æµ‹
    LIUHE = {
        ('å­', 'ä¸‘'): 'åœŸ',
        ('å¯…', 'äº¥'): 'æœ¨',
        ('å¯', 'æˆŒ'): 'ç«',
        ('è¾°', 'é…‰'): 'é‡‘',
        ('å·³', 'ç”³'): 'æ°´',
        ('åˆ', 'æœª'): 'åœŸ'
    }
    
    for i in range(len(pillars)):
        for j in range(i+1, len(pillars)):
            p1, p2 = pillars[i], pillars[j]
            pair = tuple(sorted([p1["zhi"], p2["zhi"]]))
            
            if pair in LIUHE:
                interactions.append({
                    "type": "å…­åˆ",
                    "zhi1": p1["zhi"],
                    "zhi2": p2["zhi"],
                    "position1": p1["position"],
                    "position2": p2["position"],
                    "involved_pillars": [p1["name"], p2["name"]],
                    "hehuan_element": LIUHE[pair],
                    "note": f"{p1['position']}ä¸{p2['position']}å…­åˆåŒ–{LIUHE[pair]}"
                })
    
    # ä¸‰åˆæ£€æµ‹
    SANHE = {
        ('ç”³', 'å­', 'è¾°'): 'æ°´',
        ('äº¥', 'å¯', 'æœª'): 'æœ¨',
        ('å¯…', 'åˆ', 'æˆŒ'): 'ç«',
        ('å·³', 'é…‰', 'ä¸‘'): 'é‡‘'
    }
    
    zhis = [p["zhi"] for p in pillars]
    for combo, element in SANHE.items():
        if all(z in zhis for z in combo):
            involved = [p for p in pillars if p["zhi"] in combo]
            interactions.append({
                "type": "ä¸‰åˆ",
                "zhis": list(combo),
                "involved_pillars": [p["name"] for p in involved],
                "hehuan_element": element,
                "note": f"{''.join(combo)}ä¸‰åˆ{element}å±€"
            })
    
    # ğŸ†• ä¸‰åˆ‘æ£€æµ‹
    SANXING = {
        ('å¯…', 'å·³', 'ç”³'): 'æ— æ©ä¹‹åˆ‘',
        ('ä¸‘', 'æœª', 'æˆŒ'): 'æƒåŠ¿ä¹‹åˆ‘'
    }
    
    LIANG_XING = {
        ('å­', 'å¯'): 'æ— ç¤¼ä¹‹åˆ‘'
    }
    
    ZI_XING = ['è¾°', 'åˆ', 'é…‰', 'äº¥']
    
    # æ£€æµ‹ä¸‰åˆ‘
    for combo, xing_type in SANXING.items():
        if all(z in zhis for z in combo):
            involved = [p for p in pillars if p["zhi"] in combo]
            interactions.append({
                "type": "ä¸‰åˆ‘",
                "zhis": list(combo),
                "involved_pillars": [p["name"] for p in involved],
                "xing_type": xing_type,
                "note": f"{''.join(combo)}ä¸‰åˆ‘ï¼ˆ{xing_type}ï¼‰ï¼Œå¤šä¸»ä¸é¡º"
            })
    
    # æ£€æµ‹å­å¯åˆ‘
    for combo, xing_type in LIANG_XING.items():
        if all(z in zhis for z in combo):
            involved = [p for p in pillars if p["zhi"] in combo]
            interactions.append({
                "type": "äºŒåˆ‘",
                "zhis": list(combo),
                "involved_pillars": [p["name"] for p in involved],
                "xing_type": xing_type,
                "note": f"{''.join(combo)}ç›¸åˆ‘ï¼ˆ{xing_type}ï¼‰"
            })
    
    # æ£€æµ‹è‡ªåˆ‘
    for zhi in ZI_XING:
        count = zhis.count(zhi)
        if count >= 2:
            involved = [p for p in pillars if p["zhi"] == zhi]
            interactions.append({
                "type": "è‡ªåˆ‘",
                "zhi": zhi,
                "count": count,
                "involved_pillars": [p["name"] for p in involved],
                "note": f"{zhi}å‡ºç°{count}æ¬¡ï¼Œè‡ªåˆ‘ï¼Œä¸»å†…å¿ƒçŸ›ç›¾"
            })
    
    # ğŸ†• å…­å®³æ£€æµ‹
    LIUHAI = {
        ('å­', 'æœª'): 'å­æœªå®³',
        ('ä¸‘', 'åˆ'): 'ä¸‘åˆå®³',
        ('å¯…', 'å·³'): 'å¯…å·³å®³',
        ('å¯', 'è¾°'): 'å¯è¾°å®³',
        ('ç”³', 'äº¥'): 'ç”³äº¥å®³',
        ('é…‰', 'æˆŒ'): 'é…‰æˆŒå®³'
    }
    
    for i in range(len(pillars)):
        for j in range(i+1, len(pillars)):
            p1, p2 = pillars[i], pillars[j]
            pair = tuple(sorted([p1["zhi"], p2["zhi"]]))
            
            if pair in LIUHAI:
                interactions.append({
                    "type": "å…­å®³",
                    "zhi1": p1["zhi"],
                    "zhi2": p2["zhi"],
                    "position1": p1["position"],
                    "position2": p2["position"],
                    "involved_pillars": [p1["name"], p2["name"]],
                    "hai_type": LIUHAI[pair],
                    "note": f"{LIUHAI[pair]}ï¼Œä¸»æš—ä¸­é˜»ç¢"
                })
    
    return interactions
```

---

### æ¨¡å—1.11ï¼šæŸ¥è¡¨æ•°æ®å‡†å¤‡ âœ… ç®—æ³•å®ç°

```python
def prepare_reference_tables(bazi_data):
    """
    æŸ¥è¡¨å¹¶å‡†å¤‡å‚è€ƒæ•°æ®ï¼ˆé¿å…LLMå¹»è§‰ï¼‰
    
    Returns:
        {
            "æ—ºç›¸ä¼‘å›šæ­»": {
                "season": "å†¬å­£ï¼ˆäº¥æœˆï¼‰",
                "table": {
                    "æ°´": "æ—º",
                    "æœ¨": "ç›¸",
                    "é‡‘": "ä¼‘",
                    "ç«": "å›š",
                    "åœŸ": "æ­»"
                }
            },
            "åäºŒé•¿ç”Ÿ": {
                "ä¸™ç«": {
                    "åˆ": "å¸æ—º",
                    "äº¥": "ç»",
                    "å­": "èƒ",
                    ...
                }
            },
            "è°ƒå€™é€ŸæŸ¥": {
                "ä¸™ç«äº¥æœˆ": "ç”²æœ¨ä¸ºå…ˆï¼Œå¿Œå£¬ç™¸æ°´"
            }
        }
    """
    # æ—ºç›¸ä¼‘å›šæ­»è¡¨
    WANGXIANG_TABLE = {
        "æ˜¥å­£": {"æœ¨": "æ—º", "ç«": "ç›¸", "æ°´": "ä¼‘", "é‡‘": "å›š", "åœŸ": "æ­»"},
        "å¤å­£": {"ç«": "æ—º", "åœŸ": "ç›¸", "æœ¨": "ä¼‘", "æ°´": "å›š", "é‡‘": "æ­»"},
        "ç§‹å­£": {"é‡‘": "æ—º", "æ°´": "ç›¸", "åœŸ": "ä¼‘", "ç«": "å›š", "æœ¨": "æ­»"},
        "å†¬å­£": {"æ°´": "æ—º", "æœ¨": "ç›¸", "é‡‘": "ä¼‘", "ç«": "å›š", "åœŸ": "æ­»"}
    }
    
    # åäºŒé•¿ç”Ÿè¡¨
    CHANGSHENG_TABLE = {
        "ç”²æœ¨": {"äº¥": "é•¿ç”Ÿ", "å­": "æ²æµ´", "ä¸‘": "å† å¸¦", "å¯…": "ä¸´å®˜", "å¯": "å¸æ—º", ...},
        "ä¸™ç«": {"å¯…": "é•¿ç”Ÿ", "å¯": "æ²æµ´", "è¾°": "å† å¸¦", "å·³": "ä¸´å®˜", "åˆ": "å¸æ—º", ...},
        # ... å…¶ä»–å¤©å¹²
    }
    
    # è°ƒå€™é€ŸæŸ¥è¡¨ï¼ˆä¾ã€Šç©·é€šå®é‰´ã€‹ï¼‰
    TIAOHOU_TABLE = {
        "ä¸™ç«äº¥æœˆ": "ç”²æœ¨ä¸ºå…ˆï¼Œå¿Œå£¬ç™¸æ°´",
        "ä¸™ç«å­æœˆ": "å£¬æ°´ä¸ºå°Šï¼ŒæˆŠåœŸä¸ºä½",
        # ... å…¶ä»–ç»„åˆ
    }
    
    season = get_season(bazi_data.month_zhi)
    day_gan = bazi_data.day_gan
    
    return {
        "æ—ºç›¸ä¼‘å›šæ­»": {
            "season": f"{season}ï¼ˆ{bazi_data.month_zhi}æœˆï¼‰",
            "table": WANGXIANG_TABLE[season]
        },
        "åäºŒé•¿ç”Ÿ": {
            day_gan: CHANGSHENG_TABLE[day_gan]
        },
        "è°ƒå€™é€ŸæŸ¥": {
            f"{day_gan}{bazi_data.month_zhi}æœˆ": TIAOHOU_TABLE.get(f"{day_gan}{bazi_data.month_zhi}æœˆ", "æ— ç‰¹æ®Šè¦æ±‚")
        }
    }
```

---

### æ¨¡å—1.12ï¼šäº”è¡Œç»Ÿè®¡ âœ… ç®—æ³•å®ç°

```python
def count_wuxing(bazi_data):
    """
    ç»Ÿè®¡äº”è¡Œåˆ†å¸ƒ
    
    ã€ç”¨é€”è¯´æ˜ã€‘
    1. UIå±•ç¤ºï¼šè®©ç”¨æˆ·ç›´è§‚çœ‹åˆ°äº”è¡Œåˆ†å¸ƒ
    2. è¾…åŠ©LLMï¼šæä¾›å®è§‚ä¿¡æ¯ï¼Œå¸®åŠ©åˆ¤æ–­äº”è¡Œå¤±è¡¡ç¨‹åº¦
    
    ã€é‡è¦è­¦å‘Šã€‘
    âš ï¸ æ­¤ç»Ÿè®¡ä¸èƒ½ç›´æ¥ç”¨äºæ—ºè¡°åˆ¤æ–­ï¼
    æ—ºè¡°å¿…é¡»çœ‹å¾—ä»¤ã€å¾—åœ°ã€å¾—åŠ¿ï¼Œä¸èƒ½åªçœ‹æ•°é‡ã€‚
    ä¸€ä¸ªå¾—ä»¤çš„é‡‘å¯ä»¥èƒœè¿‡ä¸‰ä¸ªå¤±ä»¤çš„æœ¨ã€‚
    
    Returns:
        {
            "æœ¨": {
                "æ•°é‡": 4.6, 
                "å æ¯”": "30%", 
                "æ¥æº": ["ç”²ï¼ˆå¹´å¹²ï¼‰", "ä¹™ï¼ˆæœˆå¹²ï¼‰", "äº¥è—ç”²Ã—2"]
            },
            "ç«": {
                "æ•°é‡": 1.7, 
                "å æ¯”": "11%", 
                "æ¥æº": ["ä¸™ï¼ˆæ—¥å¹²ï¼‰", "åˆè—ä¸"]
            },
            ...
        }
    """
    wuxing_detail = {
        "æœ¨": {"æ•°é‡": 0, "æ¥æº": []},
        "ç«": {"æ•°é‡": 0, "æ¥æº": []},
        "åœŸ": {"æ•°é‡": 0, "æ¥æº": []},
        "é‡‘": {"æ•°é‡": 0, "æ¥æº": []},
        "æ°´": {"æ•°é‡": 0, "æ¥æº": []}
    }
    
    # ç»Ÿè®¡å¤©å¹²
    pillar_names = ["å¹´å¹²", "æœˆå¹²", "æ—¥å¹²", "æ—¶å¹²"]
    for i, gan in enumerate(bazi_data.all_gans):
        element = gan_to_element(gan)
        wuxing_detail[element]["æ•°é‡"] += 1
        wuxing_detail[element]["æ¥æº"].append(f"{gan}ï¼ˆ{pillar_names[i]}ï¼‰")
    
    # ç»Ÿè®¡åœ°æ”¯è—å¹²ï¼ˆç®€åŒ–ç»Ÿè®¡ï¼šæ¯ä¸ªè—å¹²ç®—0.5ä¸ªï¼‰
    pillar_names_zhi = ["å¹´æ”¯", "æœˆæ”¯", "æ—¥æ”¯", "æ—¶æ”¯"]
    for i, zhi in enumerate(bazi_data.all_zhis):
        for cang_gan in HIDDEN_STEMS[zhi]:
            element = gan_to_element(cang_gan)
            wuxing_detail[element]["æ•°é‡"] += 0.5
            wuxing_detail[element]["æ¥æº"].append(f"{zhi}è—{cang_gan}")
    
    # è®¡ç®—å æ¯”
    total = sum(item["æ•°é‡"] for item in wuxing_detail.values())
    for element in wuxing_detail:
        ratio = wuxing_detail[element]["æ•°é‡"] / total if total > 0 else 0
        wuxing_detail[element]["å æ¯”"] = f"{int(ratio * 100)}%"
        wuxing_detail[element]["æ•°é‡"] = round(wuxing_detail[element]["æ•°é‡"], 1)
    
    return wuxing_detail
```

---

### æ¨¡å—1.13ï¼šæ ¼å±€é¢„è­¦æ ‡è®° âœ… ç®—æ³•å®ç°

```python
def check_special_pattern_flags(bazi_data):
    """
    æ ‡è®°å¼‚å¸¸ç‰¹å¾ï¼ˆæé†’LLMæ³¨æ„ï¼Œä½†ä¸æ›¿LLMåˆ¤æ–­ï¼‰
    
    Returns:
        {
            # ğŸ†• æ–°å¢ï¼šæ ¹æ°”è¯¦ç»†åˆ†æ
            "root_analysis": {
                "has_root": True,
                "roots": [
                    {
                        "zhi": "åˆ",
                        "source": "æœ¬æ°”",
                        "changsheng_status": "å¸æ—º",
                        "note": "åˆç«ä¸ºæ—¥ä¸»æœ¬æ°”æ ¹ï¼ŒæŸ¥åäºŒé•¿ç”Ÿä¸ºå¸æ—º"
                    }
                ]
            },
            
            # âœ… ä¿ç•™åŸæœ‰åŠŸèƒ½
            "æ—¥ä¸»æ— æ ¹": False,
            "äº”è¡Œç¼ºå¤±": ["é‡‘"],
            "äº”è¡Œå æ¯”å¼‚å¸¸": {
                "element": "æ°´",
                "ratio": 0.46,
                "note": "æ°´å 46%ï¼Œæ˜¾è‘—åå¤š"
            },
            "å…¨é˜´å…¨é˜³": None,
            "æç¤º": "è¯¥å…«å­—æ°´æ—ºæœ¨å¤šï¼Œäº”è¡Œåˆ†å¸ƒä¸å‡ï¼Œè¯·æ³¨æ„åˆ¤æ–­æ˜¯å¦ä¸ºç‰¹æ®Šæ ¼å±€"
        }
    """
    flags = {}
    
    # ========================================
    # ğŸ†• Part 1: æ ¹æ°”è¯¦ç»†åˆ†æï¼ˆæ–°å¢ï¼‰
    # ========================================
    day_gan = bazi_data.day_gan
    changsheng_table = get_changsheng_table(day_gan)
    
    roots = []
    for zhi in bazi_data.all_zhis:
        changsheng_status = changsheng_table[zhi]
        
        # åˆ¤æ–­æ˜¯å¦ä¸ºæœ‰æ•ˆæ ¹
        if changsheng_status in ["å¸æ—º", "ä¸´å®˜", "é•¿ç”Ÿ", "å† å¸¦"]:
            # åˆ¤æ–­æ ¹çš„æ¥æºï¼ˆæœ¬æ°”/ä¸­æ°”/ä½™æ°”ï¼‰
            hidden_stems = HIDDEN_STEMS[zhi]
            day_gan_element = gan_to_element(day_gan)
            
            # æ‰¾åˆ°æ—¥ä¸»äº”è¡Œåœ¨è¯¥åœ°æ”¯ä¸­çš„ä½ç½®
            source = "æœªçŸ¥"
            for i, stem in enumerate(hidden_stems):
                if gan_to_element(stem) == day_gan_element:
                    if i == 0:
                        source = "æœ¬æ°”"
                    elif len(hidden_stems) == 2:
                        source = "ä¸­æ°”"
                    elif i == 1:
                        source = "ä¸­æ°”"
                    else:
                        source = "ä½™æ°”"
                    break
            
            roots.append({
                "zhi": zhi,
                "source": source,
                "changsheng_status": changsheng_status,
                "note": f"{zhi}ä¸ºæ—¥ä¸»{source}æ ¹ï¼ŒæŸ¥åäºŒé•¿ç”Ÿä¸º{changsheng_status}"
            })
    
    flags["root_analysis"] = {
        "has_root": len(roots) > 0,
        "roots": roots
    }
    
    # ========================================
    # âœ… Part 2: åŸæœ‰åŠŸèƒ½ï¼ˆä¿ç•™ï¼‰
    # ========================================
    
    # 1. æ£€æŸ¥æ—¥ä¸»æœ‰æ— æ ¹ï¼ˆä¿ç•™ï¼Œä½†åŸºäºroot_analysisåˆ¤æ–­ï¼‰
    flags["æ—¥ä¸»æ— æ ¹"] = len(roots) == 0
    
    # 2. äº”è¡Œåˆ†å¸ƒç»Ÿè®¡ï¼ˆä¿ç•™åŸé€»è¾‘ï¼‰
    wuxing_count = {}
    for gan in bazi_data.all_gans:
        element = gan_to_element(gan)
        wuxing_count[element] = wuxing_count.get(element, 0) + 1
    
    for zhi in bazi_data.all_zhis:
        for cang_gan in HIDDEN_STEMS[zhi]:
            element = gan_to_element(cang_gan)
            wuxing_count[element] = wuxing_count.get(element, 0) + 0.5
    
    total = sum(wuxing_count.values())
    missing = [e for e in ["æœ¨", "ç«", "åœŸ", "é‡‘", "æ°´"] if e not in wuxing_count or wuxing_count[e] == 0]
    
    flags["äº”è¡Œç¼ºå¤±"] = missing
    
    # 3. äº”è¡Œé›†ä¸­åº¦åˆ†æï¼ˆä¿ç•™åŸé€»è¾‘ï¼‰
    if wuxing_count:
        max_element = max(wuxing_count, key=wuxing_count.get)
        max_ratio = wuxing_count[max_element] / total
        
        if max_ratio >= 0.6:
            flags["äº”è¡Œå æ¯”å¼‚å¸¸"] = {
                "element": max_element,
                "ratio": round(max_ratio, 2),
                "note": f"{max_element}å {int(max_ratio*100)}%ï¼Œæ˜¾è‘—åå¤š"
            }
        else:
            flags["äº”è¡Œå æ¯”å¼‚å¸¸"] = None
    
    # 4. é˜´é˜³ç»Ÿè®¡ï¼ˆä¿ç•™åŸé€»è¾‘ï¼‰
    yang_gans = ["ç”²", "ä¸™", "æˆŠ", "åºš", "å£¬"]
    all_yang = all(gan in yang_gans for gan in bazi_data.all_gans)
    all_yin = all(gan not in yang_gans for gan in bazi_data.all_gans)
    
    if all_yang:
        flags["å…¨é˜´å…¨é˜³"] = "å…¨é˜³"
    elif all_yin:
        flags["å…¨é˜´å…¨é˜³"] = "å…¨é˜´"
    else:
        flags["å…¨é˜´å…¨é˜³"] = None
    
    # 5. ç”Ÿæˆæç¤ºï¼ˆä¿ç•™åŸé€»è¾‘ï¼‰
    tips = []
    if flags.get("äº”è¡Œå æ¯”å¼‚å¸¸"):
        tips.append(f"{flags['äº”è¡Œå æ¯”å¼‚å¸¸']['element']}åå¤š")
    if flags["äº”è¡Œç¼ºå¤±"]:
        tips.append(f"ç¼º{'ã€'.join(flags['äº”è¡Œç¼ºå¤±'])}")
    
    if tips:
        flags["æç¤º"] = f"è¯¥å…«å­—{'ã€'.join(tips)}ï¼Œäº”è¡Œåˆ†å¸ƒä¸å‡ï¼Œè¯·æ³¨æ„åˆ¤æ–­æ˜¯å¦ä¸ºç‰¹æ®Šæ ¼å±€"
    else:
        flags["æç¤º"] = None
    
    return flags
```

---

### æ¨¡å—1.14ï¼šæœˆä»¤å¸ä»¤ç¥è®¡ç®— ğŸ†• ç®—æ³•å®ç°

```python
# æœˆä»¤å¸ä»¤è¡¨ï¼ˆä¾ã€Šæ¸Šæµ·å­å¹³ã€‹ã€Šä¸‰å‘½é€šä¼šã€‹ï¼‰
YUELING_SILING = {
    "å¯…": [
        {"period": "æœ¬æ°”", "stem": "ç”²", "days": 7},
        {"period": "ä¸­æ°”", "stem": "ä¸™", "days": 7},
        {"period": "ä½™æ°”", "stem": "æˆŠ", "days": 16}
    ],
    "å¯": [
        {"period": "æœ¬æ°”", "stem": "ä¹™", "days": 10},
        {"period": "ä¸­æ°”", "stem": "ç”²", "days": 20}
    ],
    "è¾°": [
        {"period": "æœ¬æ°”", "stem": "æˆŠ", "days": 9},
        {"period": "ä¸­æ°”", "stem": "ä¹™", "days": 3},
        {"period": "ä½™æ°”", "stem": "ç™¸", "days": 18}
    ],
    "å·³": [
        {"period": "æœ¬æ°”", "stem": "ä¸™", "days": 7},
        {"period": "ä¸­æ°”", "stem": "æˆŠ", "days": 9},
        {"period": "ä½™æ°”", "stem": "åºš", "days": 14}
    ],
    "åˆ": [
        {"period": "æœ¬æ°”", "stem": "ä¸", "days": 10},
        {"period": "ä¸­æ°”", "stem": "å·±", "days": 9},
        {"period": "ä½™æ°”", "stem": "ä¸", "days": 11}
    ],
    "æœª": [
        {"period": "æœ¬æ°”", "stem": "å·±", "days": 9},
        {"period": "ä¸­æ°”", "stem": "ä¸", "days": 3},
        {"period": "ä½™æ°”", "stem": "ä¹™", "days": 18}
    ],
    "ç”³": [
        {"period": "æœ¬æ°”", "stem": "åºš", "days": 7},
        {"period": "ä¸­æ°”", "stem": "å£¬", "days": 7},
        {"period": "ä½™æ°”", "stem": "æˆŠ", "days": 16}
    ],
    "é…‰": [
        {"period": "æœ¬æ°”", "stem": "è¾›", "days": 10},
        {"period": "ä¸­æ°”", "stem": "åºš", "days": 20}
    ],
    "æˆŒ": [
        {"period": "æœ¬æ°”", "stem": "æˆŠ", "days": 9},
        {"period": "ä¸­æ°”", "stem": "è¾›", "days": 3},
        {"period": "ä½™æ°”", "stem": "ä¸", "days": 18}
    ],
    "äº¥": [
        {"period": "æœ¬æ°”", "stem": "å£¬", "days": 7},
        {"period": "ä¸­æ°”", "stem": "ç”²", "days": 15},
        {"period": "ä½™æ°”", "stem": "å£¬", "days": 8}
    ],
    "å­": [
        {"period": "æœ¬æ°”", "stem": "ç™¸", "days": 9},
        {"period": "ä¸­æ°”", "stem": "å£¬", "days": 21}
    ],
    "ä¸‘": [
        {"period": "æœ¬æ°”", "stem": "å·±", "days": 9},
        {"period": "ä¸­æ°”", "stem": "ç™¸", "days": 3},
        {"period": "ä½™æ°”", "stem": "è¾›", "days": 18}
    ]
}

def calculate_yueling_siling(birth_datetime, month_zhi, jieqi_time):
    """
    è®¡ç®—æœˆä»¤å¸ä»¤ç¥
    
    ã€å‘½ç†åŸç†ã€‘
    æœˆä»¤ä¸æ˜¯ç®€å•çš„"å¹³å‡æƒé‡"ï¼Œè€Œæ˜¯"æ—¶æ®µå¸ä»¤"ï¼š
    - ä¸åŒæ—¶æ®µï¼Œä¸åŒè—å¹²100%å½“ä»¤
    - è¿™å†³å®šäº†æ—¥ä¸»çš„"å¾—ä»¤"ç¨‹åº¦
    
    ã€ä¸¾ä¾‹ã€‘
    åŒæ ·æ˜¯äº¥æœˆå‡ºç”Ÿï¼š
    - ç«‹å†¬å3å¤©ï¼ˆå£¬æ°´å¸ä»¤ï¼‰ï¼šä¸™ç«å¤„å¢ƒæœ€å‡¶
    - ç«‹å†¬å15å¤©ï¼ˆç”²æœ¨å¸ä»¤ï¼‰ï¼šä¸™ç«æœ‰ç”Ÿæ‰¶ï¼Œæƒ…å†µå¤§ä¸åŒ
    
    Args:
        birth_datetime: å‡ºç”Ÿæ—¶é—´ï¼ˆçœŸå¤ªé˜³æ—¶ï¼‰
        month_zhi: æœˆæ”¯
        jieqi_time: æœ¬æœˆèŠ‚æ°”æ—¶åˆ»
    
    Returns:
        {
            "siling_stem": "ç”²",  # å½“ä»¤è—å¹²
            "siling_element": "æœ¨",  # å¯¹åº”äº”è¡Œ
            "siling_shishen": "æ­£å°",  # å¯¹æ—¥ä¸»çš„åç¥
            "period": "ä¸­æ°”",  # æœ¬æ°”/ä¸­æ°”/ä½™æ°”
            "strength": 1.0,  # å¸ä»¤åŠ›é‡ï¼ˆæ»¡åˆ†ï¼‰
            "days_into_period": 3,  # è¿›å…¥è¯¥æ—¶æ®µç¬¬å‡ å¤©
            "note": "å‡ºç”Ÿåœ¨äº¥æœˆç”²æœ¨å¸ä»¤æœŸï¼ˆä¸­æ°”ï¼‰ï¼Œæœ¨ç”Ÿç«ï¼Œæœ‰åˆ©æ—¥ä¸»"
        }
    """
    # è®¡ç®—å‡ºç”Ÿæ—¥è·ç¦»èŠ‚æ°”æ—¶åˆ»çš„å¤©æ•°
    time_diff = birth_datetime - jieqi_time
    days_after_jie = time_diff.days + time_diff.seconds / 86400
    
    # æ ¹æ®å¤©æ•°åˆ¤æ–­åœ¨å“ªä¸ªå¸ä»¤æœŸ
    siling_periods = YUELING_SILING[month_zhi]
    cumulative_days = 0
    
    for period in siling_periods:
        cumulative_days += period["days"]
        if days_after_jie < cumulative_days:
            days_into_period = days_after_jie - (cumulative_days - period["days"])
            
            return {
                "siling_stem": period["stem"],
                "siling_element": gan_to_element(period["stem"]),
                "siling_shishen": get_shishen(bazi_data.day_gan, period["stem"]),
                "period": period["period"],
                "strength": 1.0,
                "days_into_period": int(days_into_period) + 1,
                "note": f"å‡ºç”Ÿåœ¨{month_zhi}æœˆ{period['stem']}å¸ä»¤æœŸï¼ˆ{period['period']}ï¼‰ï¼Œè¿›å…¥è¯¥æ—¶æ®µç¬¬{int(days_into_period)+1}å¤©"
            }
    
    # ç†è®ºä¸Šä¸ä¼šèµ°åˆ°è¿™é‡Œ
    return None
```

**é‡è¦æ€§è¯´æ˜ï¼š**
1. é‡‡ç”¨ä¼ ç»Ÿå‘½ç†çš„"å¸ä»¤æ—¥æœŸæ³•"
2. ç²¾ç¡®åæ˜ "æœˆä»¤æ·±æµ…"å¯¹æ—ºè¡°çš„å½±å“

**ç»™LLMçš„æ•°æ®ç¤ºä¾‹ï¼š**
```json
{
  "month_zhi": "äº¥",
  "hidden_stems": ["å£¬", "ç”²"],
  "siling_info": {
    "siling_stem": "ç”²",
    "siling_element": "æœ¨",
    "siling_shishen": "æ­£å°",
    "period": "ä¸­æ°”",
    "strength": 1.0,
    "days_into_period": 3,
    "note": "å‡ºç”Ÿåœ¨äº¥æœˆç”²æœ¨å¸ä»¤æœŸï¼ˆä¸­æ°”ï¼‰ï¼Œè¿›å…¥è¯¥æ—¶æ®µç¬¬3å¤©"
  }
}
```

---

### æ¨¡å—1.15ï¼šå¤©å…‹åœ°å†²æ£€æµ‹ ğŸ†• ç®—æ³•å®ç°

**ç”¨äºæ£€æµ‹å¤§è¿ä¸æµå¹´çš„æœ€å‡¶ç»„åˆ**

```python
def check_tianke_dichong(pillar1, pillar2):
    """
    æ£€æµ‹å¤©å…‹åœ°å†²
    
    ã€å‘½ç†åŸç†ã€‘
    å¤©å…‹åœ°å†²æ˜¯æœ€å‡¶çš„ç»„åˆï¼š
    - å¤©å¹²ç›¸å…‹ + åœ°æ”¯ç›¸å†²
    - ä»£è¡¨å˜åŠ¨å‰§çƒˆã€åŠ¨è¡ä¸å®‰
    - å¤šä¸»æ„å¤–ã€ç ´è´¢ã€ç–¾ç—…
    
    ã€åº”ç”¨åœºæ™¯ã€‘
    ä¸»è¦ç”¨äºæ£€æµ‹ï¼š
    1. å¤§è¿ vs æµå¹´
    2. åŸå±€ vs æµå¹´ï¼ˆè¾ƒå°‘ï¼‰
    
    Args:
        pillar1: {"gan": "ç”²", "zhi": "å¯…"}
        pillar2: {"gan": "åºš", "zhi": "ç”³"}
    
    Returns:
        {
            "is_tianke_dichong": True,
            "tiangan_ke": "åºšå…‹ç”²",
            "dizhi_chong": "å¯…ç”³å†²",
            "severity": "æå‡¶",
            "note": "å¤©å…‹åœ°å†²ï¼Œæ­¤å¹´å˜åŠ¨å‰§çƒˆï¼Œéœ€é˜²æ„å¤–ã€ç ´è´¢ã€ç–¾ç—…"
        }
    """
    # å¤©å¹²ç›¸å…‹è¡¨
    TIANGAN_KE = {
        "ç”²": ["åºš", "è¾›"],
        "ä¹™": ["åºš", "è¾›"],
        "ä¸™": ["å£¬", "ç™¸"],
        "ä¸": ["å£¬", "ç™¸"],
        "æˆŠ": ["ç”²", "ä¹™"],
        "å·±": ["ç”²", "ä¹™"],
        "åºš": ["ä¸™", "ä¸"],
        "è¾›": ["ä¸™", "ä¸"],
        "å£¬": ["æˆŠ", "å·±"],
        "ç™¸": ["æˆŠ", "å·±"]
    }
    
    # åœ°æ”¯ç›¸å†²è¡¨
    DIZHI_CHONG = {
        'å­': 'åˆ', 'åˆ': 'å­',
        'ä¸‘': 'æœª', 'æœª': 'ä¸‘',
        'å¯…': 'ç”³', 'ç”³': 'å¯…',
        'å¯': 'é…‰', 'é…‰': 'å¯',
        'è¾°': 'æˆŒ', 'æˆŒ': 'è¾°',
        'å·³': 'äº¥', 'äº¥': 'å·³'
    }
    
    gan1, zhi1 = pillar1["gan"], pillar1["zhi"]
    gan2, zhi2 = pillar2["gan"], pillar2["zhi"]
    
    # æ£€æµ‹å¤©å¹²ç›¸å…‹ï¼ˆåŒå‘ï¼‰
    tiangan_ke = (gan2 in TIANGAN_KE.get(gan1, [])) or (gan1 in TIANGAN_KE.get(gan2, []))
    
    # æ£€æµ‹åœ°æ”¯ç›¸å†²
    dizhi_chong = DIZHI_CHONG.get(zhi1) == zhi2
    
    if tiangan_ke and dizhi_chong:
        # ç¡®å®šå…‹åˆ¶æ–¹å‘
        if gan2 in TIANGAN_KE.get(gan1, []):
            ke_desc = f"{gan2}å…‹{gan1}"
        else:
            ke_desc = f"{gan1}å…‹{gan2}"
        
        return {
            "is_tianke_dichong": True,
            "tiangan_ke": ke_desc,
            "dizhi_chong": f"{zhi1}{zhi2}å†²",
            "severity": "æå‡¶",
            "note": "âš ï¸ å¤©å…‹åœ°å†²ï¼Œæ­¤å¹´å˜åŠ¨å‰§çƒˆï¼Œéœ€é˜²æ„å¤–ã€ç ´è´¢ã€ç–¾ç—…ã€å®˜é"
        }
    
    return {"is_tianke_dichong": False}
```

---

## ç¬¬äºŒé˜¶æ®µï¼šLLMæ¨ç†ï¼ˆæ ¸å¿ƒï¼‰

### æ¶æ„è®¾è®¡ï¼šä¸‰è½®å¯¹è¯

```
ã€ç¬¬ä¸€è½®ã€‘æ ¼å±€å®šæ€§ â†’ åˆ¤æ–­æ˜¯æ™®é€šæ ¼å±€è¿˜æ˜¯ç‰¹æ®Šæ ¼å±€
          â†“
     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚         â”‚
ã€åˆ†æ”¯Aã€‘    ã€åˆ†æ”¯Bã€‘
ç‰¹æ®Šæ ¼å±€    æ™®é€šæ ¼å±€
é¡ºåŠ¿å–ç”¨    â†“
          ã€ç¬¬äºŒè½®ã€‘æ—ºè¡°åˆ†æ
          â†“
          ã€ç¬¬ä¸‰è½®ã€‘ç”¨ç¥ç»¼åˆ
```

---

### ç¬¬ä¸€è½®ï¼šæ ¼å±€å®šæ€§ ğŸ”¥ LLMæ¨ç†

**Promptè®¾è®¡ï¼š**

```markdown
ã€è§’è‰²ã€‘ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„å‘½ç†å¸ˆï¼Œæ­£åœ¨è¿›è¡Œå…«å­—åˆ†æçš„ç¬¬ä¸€æ­¥ï¼šæ ¼å±€å®šæ€§ã€‚

ã€è¾“å…¥æ•°æ®ã€‘

åŸºæœ¬ä¿¡æ¯ï¼š
- æ—¥ä¸»ï¼šä¸™ç«
- æ€§åˆ«ï¼šç”·
- å‡ºç”Ÿæ—¶é—´ï¼š1984-11-07 äº¥æœˆï¼ˆå†¬å­£ï¼‰

å››æŸ±å¹²æ”¯ï¼š
å¹´æŸ±ï¼šç”²å­
æœˆæŸ±ï¼šä¹™äº¥
æ—¥æŸ±ï¼šä¸™åˆ
æ—¶æŸ±ï¼šå·±äº¥

æœˆä»¤é€å¹²åˆ†æï¼ˆé‡è¦ï¼ï¼‰ï¼š
- æœˆæ”¯ï¼šäº¥
- æœˆä»¤è—å¹²ï¼šå£¬æ°´ã€ç”²æœ¨
- é€å¹²æ£€æµ‹ï¼š
  * å£¬æ°´ï¼šæœªé€å‡º (ä¸ƒæ€)
  * ç”²æœ¨ï¼šé€äºå¹´å¹² (åå°)
- æ ¼å±€æç¤ºï¼šæœˆä»¤ç”²æœ¨é€äºå¹´å¹²ï¼Œå¯å–åå°æ ¼

åœ°æ”¯è—å¹²ï¼š
- å­ï¼šç™¸ã€å£¬
- äº¥Ã—2ï¼šå£¬ã€ç”²
- åˆï¼šä¸ã€å·±

æœˆä»¤å¸ä»¤ç¥ï¼ˆé‡è¦ï¼ï¼‰ï¼š
- å¸ä»¤è—å¹²ï¼šç”²æœ¨
- å¸ä»¤æœŸï¼šä¸­æ°”ï¼ˆè¿›å…¥ç¬¬3å¤©ï¼‰
- å¯¹æ—¥ä¸»ï¼šæ­£å°ï¼ˆæœ¨ç”Ÿç«ï¼‰
- è¯´æ˜ï¼šå‡ºç”Ÿåœ¨äº¥æœˆç”²æœ¨å¸ä»¤æœŸï¼Œæœ¨ç”Ÿç«ï¼Œæœ‰åˆ©æ—¥ä¸»

åç¥æ ‡æ³¨ï¼š
- ç”²æœ¨ï¼šæ­£å°
- ä¹™æœ¨ï¼šåå°
- å·±åœŸï¼šä¼¤å®˜
- å£¬æ°´ï¼ˆäº¥è—ï¼‰ï¼šæ­£å®˜
- ç™¸æ°´ï¼ˆå­è—ï¼‰ï¼šä¸ƒæ€

äº”è¡Œç»Ÿè®¡ï¼ˆä»…ä¾›å‚è€ƒï¼Œä¸èƒ½ç›´æ¥åˆ¤æ–­æ—ºè¡°ï¼‰ï¼š
- æœ¨ï¼š4.6ä¸ªï¼ˆ30%ï¼‰
- ç«ï¼š1.7ä¸ªï¼ˆ11%ï¼‰
- åœŸï¼š2.0ä¸ªï¼ˆ13%ï¼‰
- é‡‘ï¼š0ä¸ªï¼ˆ0%ï¼‰
- æ°´ï¼š7.7ä¸ªï¼ˆ46%ï¼‰

âš ï¸ æ³¨æ„ï¼šäº”è¡Œæ•°é‡ä¸ç­‰äºæ—ºè¡°ï¼å¿…é¡»ç»“åˆå¾—ä»¤ã€å¾—åœ°ã€å¾—åŠ¿ç»¼åˆåˆ¤æ–­ã€‚

åˆ‘å†²åˆå®³ï¼š
- å­åˆå†²ï¼šå¹´æ”¯ä¸æ—¥æ”¯ç›¸å†²
- äº¥äº¥è‡ªåˆ‘ï¼šæœˆæ”¯ä¸æ—¶æ”¯è‡ªåˆ‘

æ ¼å±€é¢„è­¦æ ‡è®°ï¼š
- æ—¥ä¸»æ— æ ¹ï¼šå¦ï¼ˆåˆç«ä¸ºå¸æ—ºæ ¹ï¼‰
- äº”è¡Œç¼ºå¤±ï¼šé‡‘
- äº”è¡Œå æ¯”å¼‚å¸¸ï¼šæ°´å 46%ï¼Œæ˜¾è‘—åå¤š
- æç¤ºï¼šè¯¥å…«å­—æ°´æ—ºæœ¨å¤šï¼Œäº”è¡Œåˆ†å¸ƒä¸å‡ï¼Œè¯·æ³¨æ„åˆ¤æ–­æ˜¯å¦ä¸ºç‰¹æ®Šæ ¼å±€

---

ã€åˆ†æä»»åŠ¡ã€‘

è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤åˆ¤æ–­æ ¼å±€ï¼š

**Step 1ï¼šç‰¹æ®Šæ ¼å±€æ’æŸ¥**

æ£€æŸ¥æ˜¯å¦æ»¡è¶³ç‰¹æ®Šæ ¼å±€æ¡ä»¶ï¼š

1. ä»æ ¼ï¼ˆæ—¥ä¸»æå¼±ï¼Œå¼ƒå‘½ä»åŠ¿ï¼‰
   - æ—¥ä¸»æœ‰æ— å¼ºæ ¹ï¼Ÿï¼ˆæŸ¥å¼‚å¸¸æ ‡è®°ï¼‰
   - å››æŸ±æ˜¯å¦æŸä¸€åç¥æˆåŠ¿ï¼ˆå æ¯”>60%ä¸”å¾—ä»¤é€å¹²ï¼‰ï¼Ÿ
   - åˆ¤æ–­ï¼šæ˜¯/å¦

2. ä¸“æ—ºæ ¼ï¼ˆæŸä¸€äº”è¡Œå ç»å¯¹ä¼˜åŠ¿ï¼‰
   - æŸä¸€äº”è¡Œæ˜¯å¦å 70%ä»¥ä¸Šï¼Ÿ
   - æ—¥ä¸»æ˜¯å¦ä¸ºè¯¥äº”è¡Œï¼Ÿ
   - åˆ¤æ–­ï¼šæ˜¯/å¦

3. åŒ–æ°”æ ¼ï¼ˆå¤©å¹²åˆåŒ–ï¼ŒåŒ–ç¥å¾—ä»¤ï¼‰
   - æ—¥å¹²æ˜¯å¦ä¸ä»–å¹²åˆåŒ–ï¼Ÿ
   - åŒ–ç¥æ˜¯å¦å¾—ä»¤é€å¹²ï¼Ÿ
   - åˆ¤æ–­ï¼šæ˜¯/å¦

**Step 2ï¼šæ™®é€šæ ¼å±€åˆ¤æ–­**

å¦‚æœä¸æ˜¯ç‰¹æ®Šæ ¼å±€ï¼Œåˆ™åˆ¤æ–­æ™®é€šæ ¼å±€ï¼š

- çœ‹æœˆä»¤å¸ä»¤ç¥ï¼šç”²æœ¨ï¼ˆæ­£å°ï¼‰
- ç”²æœ¨æ˜¯å¦é€å¹²ï¼šæ˜¯ï¼ˆé€å¹´å¹²ï¼‰
- åˆæ­¥æ ¼å±€ï¼šæ­£å°æ ¼

**Step 3ï¼šæœ€ç»ˆåˆ¤å®š**

è¯·ç»™å‡ºç»“è®ºï¼š
- æ ¼å±€ç±»å‹
- åˆ¤æ–­ä¾æ®ï¼ˆ200å­—ä»¥å†…ï¼‰
- ä¸‹ä¸€æ­¥ï¼šè¿›å…¥æ—ºè¡°åˆ†æ / è¿›å…¥é¡ºåŠ¿åˆ†æ

ã€è¾“å‡ºæ ¼å¼ã€‘
json
{
  "pattern_category": "æ™®é€šæ ¼å±€|ç‰¹æ®Šæ ¼å±€",
  "pattern_type": "æ­£å°æ ¼|ä»æ ¼|...",
  "reasoning": "åˆ¤æ–­ä¾æ®",
  "next_step": "æ—ºè¡°åˆ†æ|é¡ºåŠ¿åˆ†æ"
}

```

---


### ç¬¬äºŒè½®Aï¼šæ—ºè¡°åˆ†æï¼ˆæ™®é€šæ ¼å±€ï¼‰ğŸ”¥ LLMæ¨ç†ï¼ˆä¿®æ­£ç‰ˆï¼‰

**Promptè®¾è®¡ï¼š**

```markdown
ã€ä¸Šä¸€æ­¥ç»“è®ºã€‘
æ ¼å±€ç±»å‹ï¼šæ­£å°æ ¼
ä¸‹ä¸€æ­¥ï¼šè¿›å…¥æ—ºè¡°åˆ†æ

---

ã€è¾“å…¥æ•°æ®ã€‘

å‚è€ƒè¡¨ï¼ˆå·²æŸ¥è¡¨ï¼‰ï¼š

1. æ—ºç›¸ä¼‘å›šæ­»è¡¨ï¼ˆå†¬å­£äº¥æœˆï¼‰ï¼š
   - æ°´ï¼šæ—º
   - æœ¨ï¼šç›¸
   - é‡‘ï¼šä¼‘
   - ç«ï¼šå›š
   - åœŸï¼šæ­»

2. åäºŒé•¿ç”Ÿè¡¨ï¼ˆä¸™ç«ï¼‰ï¼š
   - åˆï¼šå¸æ—º
   - äº¥ï¼šç»
   - å­ï¼šèƒ

3. æœˆä»¤å¸ä»¤ç¥ï¼š
   - å¸ä»¤è—å¹²ï¼šç”²æœ¨ï¼ˆæ­£å°ï¼‰
   - å¸ä»¤æœŸï¼šä¸­æ°”
   - è¯´æ˜ï¼šç”²æœ¨å½“ä»¤ï¼Œæœ¨ç”Ÿç«ï¼Œå¯¹æ—¥ä¸»æœ‰åˆ©

4.æ—¥ä¸»æ ¹æ°”è¯¦ç»†åˆ†æï¼ˆæ¥è‡ªæ¨¡å—1.13 root_analysisï¼‰ï¼š
- åˆç«ï¼šæœ¬æ°”æ ¹ï¼ŒåäºŒé•¿ç”Ÿä¸º"å¸æ—º"ï¼ˆæœ€å¼ºæ ¹ï¼‰
  ä½ç½®ï¼šæ—¥æ”¯
  çŠ¶æ€ï¼šå—å­åˆå†²å½±å“
- å¯…æœ¨ï¼šæ— ç›´æ¥æ ¹ï¼ˆå¯…ä¸­è—ç”²ä¸™æˆŠï¼Œä¸™ä¸ºä¸­æ°”ï¼‰
---

ã€åˆ†æä»»åŠ¡ã€‘

è¯·åˆ†ææ—¥ä¸»ä¸™ç«çš„æ—ºè¡°ç­‰çº§ï¼ˆ6çº§åˆ†ç±»ï¼‰ï¼š

**æ—ºè¡°ç­‰çº§è¡¨ï¼š**
- å¤ªæ—ºï¼šè¿‡äºå¼ºæ—ºï¼Œéœ€æ³„è€—
- åæ—ºï¼šç•¥å¼ºï¼Œå–œå…‹æ³„è€—
- ä¸­å’Œï¼šå¹³è¡¡ï¼Œå–œå¿Œä¸æ˜æ˜¾
- åå¼±ï¼šç•¥å¼±ï¼Œå–œç”Ÿæ‰¶
- èº«å¼±ï¼šæ˜æ˜¾åå¼±ï¼Œæ€¥éœ€ç”Ÿæ‰¶
- å¤ªå¼±ï¼šæå¼±ï¼Œè€ƒè™‘ä»æ ¼

---

**ç»´åº¦1ï¼šå¾—ä»¤ï¼ˆæƒé‡50%ï¼‰**

é—®é¢˜ï¼š
- ä¸™ç«ç”Ÿäºäº¥æœˆï¼ˆå†¬å­£ï¼‰ï¼ŒæŸ¥è¡¨ä¸º"å›š"ï¼Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ
- ä½†æœˆä»¤å¸ä»¤ç¥æ˜¯ç”²æœ¨ï¼ˆæ­£å°ï¼‰ï¼Œç”²æœ¨å½“ä»¤ï¼Œæœ¨èƒ½ç”Ÿç«
- è¿™ç§æƒ…å†µä¸‹ï¼Œæ—¥ä¸»æ˜¯å¾—ä»¤è¿˜æ˜¯å¤±ä»¤ï¼Ÿ
- åˆ¤æ–­ï¼šå®Œå…¨å¤±ä»¤ / éƒ¨åˆ†å¤±ä»¤ / å‹‰å¼ºå¾—ä»¤ï¼Ÿ

**ç»´åº¦2ï¼šå¾—åœ°ï¼ˆæƒé‡30%ï¼‰**

é—®é¢˜ï¼š
- ä¸™ç«åœ¨åœ°æ”¯çš„æ ¹æ°”æƒ…å†µï¼ˆå·²ç”±ç®—æ³•åˆ†æï¼‰ï¼š
  * åˆç«ï¼šæœ¬æ°”æ ¹ + å¸æ—ºçŠ¶æ€ï¼ˆç†è®ºä¸Šæœ€å¼ºï¼‰
  * ä½†ï¼šå­åˆå†²ï¼Œåˆç«å—æŸ
  
- è¯·ç»¼åˆåˆ¤æ–­ï¼š
  1. æœ¬æ°”å¸æ—ºæ ¹å—å†²åï¼Œå®é™…å¼ºåº¦å¦‚ä½•ï¼Ÿï¼ˆå¼ºæ ¹â†’ä¸­æ ¹ï¼Ÿï¼‰
  2. æ˜¯å¦è¿˜æœ‰å…¶ä»–é—´æ¥æ ¹ï¼Ÿï¼ˆå¦‚äº¥ä¸­ç”²æœ¨ç”Ÿç«ï¼Œç®—ä¸ç®—æ ¹ï¼Ÿï¼‰
  
é‡è¦æç¤ºï¼š
- æ ¹çš„å¼ºå¼±ä¸ä»…çœ‹æ¥æºï¼ˆæœ¬æ°”/ä¸­æ°”/ä½™æ°”ï¼‰
- æ›´è¦çœ‹æ˜¯å¦å—åˆ‘å†²ã€æ˜¯å¦å¾—æœˆä»¤ç¯å¢ƒæ”¯æŒ
- è¯·ç»¼åˆåˆ†æåç»™å‡ºåˆ¤æ–­

ç»¼åˆåˆ¤æ–­ï¼šå¼ºæ ¹ / ä¸­æ ¹ / å¼±æ ¹ / æ— æ ¹ï¼Ÿ

**ç»´åº¦3ï¼šå¾—åŠ¿ï¼ˆæƒé‡20%ï¼‰**

é—®é¢˜ï¼š
- å¤©å¹²ï¼šç”²ä¹™æœ¨é€å¹²ï¼Œèƒ½ç”Ÿç«ï¼Œæ˜¯åŠ©åŠ›è¿˜æ˜¯é˜»åŠ›ï¼Ÿ
- åœ°æ”¯ï¼šäº¥å­æ°´æ—ºï¼Œå…‹ç«ï¼Œæ˜¯åŠ©åŠ›è¿˜æ˜¯é˜»åŠ›ï¼Ÿ
- ç»¼åˆç¯å¢ƒå¯¹æ—¥ä¸»å‹å¥½è¿˜æ˜¯æ•Œå¯¹ï¼Ÿ

**ç»´åº¦4ï¼šåˆ‘å†²å½±å“**

- å­åˆå†²å¯¹åˆç«æ ¹çš„å½±å“ç¨‹åº¦ï¼Ÿ
- äº¥äº¥è‡ªåˆ‘çš„å½±å“ç¨‹åº¦ï¼Ÿ

---

ã€è¾“å‡ºè¦æ±‚ã€‘

è¯·ç»¼åˆä»¥ä¸Šåˆ†æï¼Œç»™å‡ºï¼š
1. æ—ºè¡°ç­‰çº§ï¼šå¤ªæ—º / åæ—º / ä¸­å’Œ / åå¼± / èº«å¼± / å¤ªå¼±ï¼ˆ6é€‰1ï¼‰
2. åˆ¤æ–­ç†ç”±ï¼ˆ300å­—ä»¥å†…ï¼‰

ã€è¾“å‡ºæ ¼å¼ã€‘
json
{
  "strength_level": "åå¼±",
  "deling_analysis": "å¤±ä»¤ä½†æœ‰æœ¨æ°”ç”Ÿæ‰¶ï¼Œéƒ¨åˆ†å¤±ä»¤",
  "dedi_analysis": "å¸æ—ºæ ¹ä½†å—å†²æŸå¤±çº¦30%ï¼Œä¸­ç­‰é€šæ ¹",
  "deshi_analysis": "æœ¨ç”Ÿç«ç•¥èƒœæ°´å…‹ç«ï¼Œå¾®æœ‰å¸®åŠ©",
  "reasoning": "ç»¼åˆåˆ†æï¼šè™½ç„¶å†¬æœˆç«å›šï¼Œä½†æœˆä»¤ç”²æœ¨å¸ä»¤ï¼Œæœ¨ç”Ÿç«ï¼Œç»™äº†æ—¥ä¸»ç”Ÿæœºã€‚åˆç«å¸æ—ºæ ¹è™½è¢«å†²æŸï¼Œä»æœ‰ä½™åŠ›ã€‚å¤©å¹²ç”²ä¹™æœ¨é€å¹²ï¼Œå½¢æˆç”Ÿæ‰¶ä¹‹åŠ¿ã€‚æ•´ä½“åˆ¤å®šä¸ºåå¼±ï¼Œéœ€è¦ç”Ÿæ‰¶ä½†ä¸è‡³äºå¤ªå¼±ã€‚"
}

```


---

### ç¬¬äºŒè½®Bï¼šé¡ºåŠ¿åˆ†æï¼ˆç‰¹æ®Šæ ¼å±€ï¼‰ğŸ”¥ LLMæ¨ç†

```markdown
ã€ä¸Šä¸€æ­¥ç»“è®ºã€‘
æ ¼å±€ç±»å‹ï¼šä»å„¿æ ¼ï¼ˆç–‘ä¼¼ï¼‰
ä¸‹ä¸€æ­¥ï¼šéªŒè¯æˆæ ¼æ¡ä»¶

---

ã€ä»æ ¼æˆæ ¼æ¡ä»¶ã€‘

ä»å„¿æ ¼ï¼ˆä»é£Ÿä¼¤ï¼‰çš„æ ‡å‡†ï¼š
1. æ—¥ä¸»æ— æ ¹æˆ–æ ¹æå¼±
2. æ»¡ç›˜é£Ÿä¼¤ï¼ŒåŠ¿ä¸å¯æŒ¡ï¼ˆé£Ÿä¼¤å æ¯”>60%ä¸”å¾—ä»¤ï¼‰
3. æ— å°æ˜Ÿå¸®èº«ï¼ˆæˆ–å°æ˜Ÿæ— åŠ›ï¼‰
4. æ— æ¯”åŠ«åŠ©èº«ï¼ˆæˆ–æ¯”åŠ«æ— åŠ›ï¼‰

---

ã€åˆ†æä»»åŠ¡ã€‘

è¯·é€æ¡éªŒè¯ï¼š

1. æ—¥ä¸»åœ¨åœ°æ”¯æœ‰æ— å¼ºæ ¹ï¼Ÿ
   - æŸ¥åäºŒé•¿ç”Ÿè¡¨
   - åˆ¤æ–­æ ¹çš„å¼ºåº¦

2. é£Ÿä¼¤ï¼ˆå‡è®¾æ˜¯æœ¨ï¼‰çš„åŠ›é‡å¦‚ä½•ï¼Ÿ
   - æ•°é‡å æ¯”
   - æ˜¯å¦å¾—ä»¤ï¼ˆæŸ¥æœˆä»¤å¸ä»¤ç¥ï¼‰
   - æ˜¯å¦é€å¹²

3. æ˜¯å¦æœ‰å°æ˜Ÿç ´æ ¼ï¼Ÿ
   - å°æ˜Ÿçš„æ•°é‡å’ŒåŠ›é‡
   - æ˜¯å¦è¶³ä»¥ç ´æ ¼

4. æ˜¯å¦æœ‰æ¯”åŠ«ç ´æ ¼ï¼Ÿ
   - æ¯”åŠ«çš„æ•°é‡å’ŒåŠ›é‡
   - æ˜¯å¦è¶³ä»¥ç ´æ ¼

---

ã€åˆ¤å®šã€‘

- çœŸä»ï¼šçº¯ç²¹ä»å„¿ï¼Œæ— ç ´æ ¼å› ç´ ï¼ˆå±‚æ¬¡é«˜ï¼‰
- å‡ä»ï¼šæœ‰ç ´æ ¼å› ç´ ä½†ä¸è¶³ä»¥ç ´æ ¼ï¼ˆå±‚æ¬¡ä¸­ï¼‰
- ä¸ä»ï¼šç ´æ ¼å› ç´ å¤ªå¼ºï¼Œä¸æˆä»æ ¼ï¼ˆæŒ‰æ™®é€šæ ¼å±€è®ºï¼‰

ã€è¾“å‡ºæ ¼å¼ã€‘
json
{
  "pattern_status": "çœŸä»|å‡ä»|ä¸ä»",
  "reasoning": "...",
  "useful_gods": ["æœ¨", "æ°´"],
  "taboo_gods": ["ç«", "é‡‘"]
}

```


---

### ç¬¬ä¸‰è½®ï¼šç”¨ç¥ç»¼åˆ ğŸ”¥ LLMæ¨ç†

**Promptè®¾è®¡ï¼š**

```markdown
ã€ä¸Šä¸€æ­¥ç»“è®ºã€‘
æ—ºè¡°ç­‰çº§ï¼šåå¼±
åˆ¤æ–­ç†ç”±ï¼šè™½ç„¶å†¬æœˆç«å›šï¼Œä½†æœˆä»¤ç”²æœ¨å¸ä»¤ï¼Œæœ¨ç”Ÿç«ï¼Œç»™äº†æ—¥ä¸»ç”Ÿæœº...

---

ã€è¾“å…¥æ•°æ®ã€‘

å‚è€ƒè¡¨ï¼ˆå·²æŸ¥è¡¨ï¼‰ï¼š
ï¼ˆä¿æŒåŸæœ‰å†…å®¹ï¼‰

ğŸ†• åˆ‘å†²åˆå®³å…³ç³»ï¼ˆç®—æ³•æä¾›ï¼‰ï¼š
- å­åˆå†²ï¼ˆå¹´æ”¯ vs æ—¥æ”¯ï¼‰
- ï¼ˆå¦‚æœæœ‰åˆï¼‰å­ä¸‘åˆï¼ˆå¹´æ”¯ vs æŸæ”¯ï¼‰

---

ã€åˆ†æä»»åŠ¡ã€‘

====================================================
   Step 0ï¼šåœ°æ”¯å…³ç³»ä¼˜å…ˆçº§åˆ¤æ–­ï¼ˆå‰ç½®æ­¥éª¤ï¼‰
====================================================

âš ï¸ å½“åˆä¸å†²åŒæ—¶å­˜åœ¨æ—¶ï¼Œéœ€è¦å…ˆåˆ¤æ–­ä¼˜å…ˆçº§

ã€æ£€æµ‹åˆ°çš„å…³ç³»ã€‘
- å­åˆå†²ï¼ˆå¹´æ”¯ vs æ—¥æ”¯ï¼‰
- å­ä¸‘åˆï¼ˆå¹´æ”¯ vs å¤§è¿åœ°æ”¯ï¼Œå¦‚æœå­˜åœ¨ï¼‰

ã€åˆ¤æ–­ä»»åŠ¡ã€‘
å¦‚æœåŒæ—¶å­˜åœ¨åˆä¸å†²ï¼Œè¯·åˆ†æï¼š

1. åˆçš„åŠ›é‡è¯„ä¼°ï¼š
   - åˆç¥ï¼ˆä¸‘åœŸï¼‰æ˜¯å¦å¾—ä»¤æœ‰åŠ›ï¼Ÿ
   - åˆåŒ–æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Ÿ

2. ä¼˜å…ˆçº§åˆ¤æ–­ï¼š
   - å¦‚æœåˆåŠ›å¼º â†’ "è´ªåˆå¿˜å†²"ï¼ˆåˆå ä¸»å¯¼ï¼Œå†²å‡å¼±ï¼‰
   - å¦‚æœåˆåŠ›å¼± â†’ å†²ä»æœ‰æ•ˆ

3. å¯¹æ ¹æ°”çš„å½±å“ï¼š
   - å¦‚æœè´ªåˆå¿˜å†²ï¼Œåˆç«æ ¹å¾—åˆ°ä¿æŠ¤
   - å¦‚æœå†²ä»æœ‰æ•ˆï¼Œåˆç«æ ¹å—æŸ

è¯·æ˜ç¡®è¯´æ˜ï¼šæœ¬æ¡ˆæ˜¯"è´ªåˆå¿˜å†²"è¿˜æ˜¯"å†²å ä¸»å¯¼"ï¼Œå¹¶æ®æ­¤è°ƒæ•´å¯¹æ ¹æ°”ç¨³å®šæ€§çš„åˆ¤æ–­ã€‚

ğŸ”» å®ŒæˆStep 0åï¼Œå†è¿›å…¥ç”¨ç¥é€‰æ‹© ğŸ”»

====================================================
   Step 1ï¼šç”¨ç¥é€‰æ‹© - ä¸‰æ³•ç»¼åˆ
====================================================

è¯·åˆ†åˆ«ä»ä¸‰ä¸ªç»´åº¦åˆ†æç”¨ç¥ï¼Œç„¶åç»¼åˆåˆ¤æ–­ï¼š


**ç»´åº¦1ï¼šæ‰¶æŠ‘æ³•**

è§„åˆ™ï¼ˆæ ¹æ®æ—ºè¡°ç­‰çº§ï¼‰ï¼š
- å¤ªæ—º â†’ å¿…é¡»æ³„è€—ï¼ˆé£Ÿä¼¤ã€è´¢æ˜Ÿï¼‰
- åæ—º â†’ å…‹æ³„è€—å‡å¯ï¼ˆå®˜æ€ã€é£Ÿä¼¤ã€è´¢æ˜Ÿï¼‰
- ä¸­å’Œ â†’ ç»´æŒå¹³è¡¡
- åå¼± â†’ ç”Ÿæ‰¶ä¸ºä¸»ï¼ˆå°æ˜Ÿã€æ¯”åŠ«ï¼‰
- èº«å¼± â†’ å¿…é¡»ç”Ÿæ‰¶ï¼ˆå°æ˜Ÿã€æ¯”åŠ«ï¼‰
- å¤ªå¼± â†’ è€ƒè™‘ä»æ ¼

æœ¬æ¡ˆåˆ†æï¼š
- æ—¥ä¸»åå¼± â†’ éœ€è¦ç”Ÿæ‰¶
- å°æ˜Ÿï¼ˆæœ¨ï¼‰ï¼šæœ¨ç”Ÿç«ï¼Œèƒ½å¦ç”¨ï¼Ÿ
- æ¯”åŠ«ï¼ˆç«ï¼‰ï¼šç«å¸®ç«ï¼Œèƒ½å¦ç”¨ï¼Ÿ
- ç»¼åˆåˆ¤æ–­æ‰¶æŠ‘ç”¨ç¥ï¼šï¼Ÿ

**ç»´åº¦2ï¼šè°ƒå€™æ³•**

æŸ¥è¡¨ï¼šä¸™ç«ç”Ÿäºäº¥æœˆï¼ˆå†¬å­£ï¼‰
- ã€Šç©·é€šå®é‰´ã€‹ï¼šç”²æœ¨ä¸ºå…ˆï¼Œå¿Œå£¬ç™¸æ°´
- ç†ç”±ï¼šå†¬ç«å¦‚çƒ›ï¼Œéœ€æœ¨ç”Ÿç«å–æš–

æœ¬æ¡ˆåˆ†æï¼š
- è°ƒå€™éœ€è¦ä»€ä¹ˆï¼Ÿ
- ä¸æ‰¶æŠ‘æ³•æ˜¯å¦ä¸€è‡´ï¼Ÿ

**ç»´åº¦3ï¼šé€šå…³æ³•**

å‘½å±€çŸ›ç›¾æ£€æµ‹ï¼š
- å­åˆå†²ï¼ˆæ°´ç«ç›¸æˆ˜ï¼‰
- éœ€è¦é€šå…³ç¥åŒ–è§£

æœ¬æ¡ˆåˆ†æï¼š
- æ°´ç«ç›¸æˆ˜ï¼Œç”¨ä»€ä¹ˆé€šå…³ï¼Ÿ
- æœ¨ï¼ˆæ°´ç”Ÿæœ¨ï¼Œæœ¨ç”Ÿç«ï¼‰æ˜¯å¦å¯è¡Œï¼Ÿ

---

====================================================
   Step 2ï¼šä¸‰æ³•ç»¼åˆä¸å†²çªä»²è£
====================================================

ğŸ†• è§„åˆ™ï¼ˆå½“ä¸‰æ³•ç»“è®ºå†²çªæ—¶ï¼‰ï¼š

**ä¼˜å…ˆçº§1ï¼šç”Ÿå­˜ä¼˜å…ˆ**
- å¦‚æœæ—¥ä¸»"å¤ªå¼±"æˆ–"èº«å¼±"ï¼Œæ‰¶æŠ‘æ³•ä¼˜å…ˆäºè°ƒå€™æ³•
- ç†ç”±ï¼šç”Ÿå­˜æ˜¯ç¬¬ä¸€ä½çš„ï¼Œå‘½éƒ½ä¿ä¸ä½è°ˆä½•è°ƒå€™
- ç¤ºä¾‹ï¼šåºšé‡‘å­æœˆèº«å¼±ï¼Œè™½ç„¶å†¬é‡‘éœ€ç«æš–ï¼Œä½†èº«å¼±å¿…é¡»å…ˆç”¨åœŸé‡‘æ‰¶èº«

**ä¼˜å…ˆçº§2ï¼šæç«¯å¤±è¡¡ä¼˜å…ˆ**  
- å¦‚æœå…«å­—"æå¯’"(å†¬æ°´ä¸€ç‰‡æ— ç«)æˆ–"æç‡¥"(å¤ç«ç‚ç‚æ— æ°´)ï¼Œè°ƒå€™æ³•ä¼˜å…ˆ
- ç†ç”±ï¼šäº”è¡Œæåº¦å¤±è¡¡ä¼šå¯¼è‡´æ ¼å±€ä½ä¸‹ï¼Œå®å¯èº«å¼±ä¹Ÿè¦è°ƒå’Œ
- ç¤ºä¾‹ï¼šä¸™ç«ç”Ÿäºå­æœˆæ»¡ç›˜æ°´ï¼Œå³ä½¿èº«æ—ºä¹Ÿå¿…é¡»ç”¨ç”²æœ¨è°ƒå€™

**ä¼˜å…ˆçº§3ï¼šé€šå…³ä½œä¸ºæ¡¥æ¢**
- å¦‚æœæ‰¶æŠ‘å’Œè°ƒå€™çŸ›ç›¾ï¼Œä¼˜å…ˆè€ƒè™‘èƒ½å¦ç”¨é€šå…³ç¥å…¼é¡¾
- ç¤ºä¾‹ï¼šåºšé‡‘å­æœˆï¼Œç”¨æˆŠåœŸæ—¢ç”Ÿé‡‘æ‰¶èº«ï¼Œåˆèƒ½æš–å±€è°ƒå€™

ã€æœ¬æ¡ˆä¸‰æ³•åˆ¤æ–­ã€‘

æœ¬æ¡ˆæƒ…å†µï¼š
- æ‰¶æŠ‘æ³•ï¼šéœ€è¦ï¼Ÿ
- è°ƒå€™æ³•ï¼šéœ€è¦ï¼Ÿ
- é€šå…³æ³•ï¼šéœ€è¦ï¼Ÿ
- æ˜¯å¦å­˜åœ¨å†²çªï¼šï¼Ÿ

è¯·æŒ‰ä»¥ä¸Šä¼˜å…ˆçº§è§„åˆ™ï¼Œç»™å‡ºæœ€ç»ˆç”¨ç¥é€‰æ‹©ï¼Œå¹¶è¯´æ˜ç†ç”±ã€‚

---

ã€è¾“å‡ºæ ¼å¼ã€‘
json
{
  "primary_god": {
    "element": "æœ¨",
    "functions": ["ç”Ÿæ‰¶æ—¥ä¸»", "è°ƒå€™å–æš–", "åŒ–è§£æ°´å…‹"],
    "priority": "highest"
  },
  "secondary_god": {
    "element": "ç«",
    "functions": ["å¸®èº«"],
    "priority": "medium"
  },
  "taboo_gods": [
    {"element": "æ°´", "severity": "high", "reason": "å…‹ç«ä¸”å½“æ—º"},
    {"element": "åœŸ", "severity": "medium", "reason": "æ³„ç«æ°”"},
    {"element": "é‡‘", "severity": "medium", "reason": "å…‹æœ¨ç ´ç”¨ç¥"}
  ]
}

```

---

## ç¬¬ä¸‰é˜¶æ®µï¼šå¤§è¿æµå¹´åˆ†æ

### æ¨¡å—3.1ï¼šå¤§è¿æ’æ³• âœ… ç®—æ³•å®ç°ï¼ˆè¡¥å…¨ç‰ˆï¼‰

**ğŸ”§ é‡è¦è¡¥å…¨ï¼šèµ·è¿æ—¶é—´ç®—æ³•å®Œæ•´å®ç°**

```python
def determine_dayun_direction(year_gan, gender):
    """
    ç¡®å®šå¤§è¿é¡ºé€†
    
    è§„åˆ™ï¼š
    - é˜³ç”·é˜´å¥³ï¼šé¡ºæ’
    - é˜´ç”·é˜³å¥³ï¼šé€†æ’
    """
    yang_gan = ['ç”²', 'ä¸™', 'æˆŠ', 'åºš', 'å£¬']
    
    if year_gan in yang_gan:
        return "é¡ºæ’" if gender == "ç”·" else "é€†æ’"
    else:
        return "é¡ºæ’" if gender == "å¥³" else "é€†æ’"


def calculate_qiyun_age(birth_datetime, year_jie_list, direction):
    """
    è®¡ç®—èµ·è¿å²æ•°
    
    è§„åˆ™ï¼š
    - é¡ºæ’ï¼šä»å‡ºç”Ÿæ—¶åˆ»é¡ºæ•°åˆ°ä¸‹ä¸€ä¸ª"èŠ‚"
    - é€†æ’ï¼šä»å‡ºç”Ÿæ—¶åˆ»é€†æ•°åˆ°ä¸Šä¸€ä¸ª"èŠ‚"
    - 3å¤©=1å²ï¼Œ1å¤©=4ä¸ªæœˆï¼Œ1æ—¶è¾°=10å¤©
    
    Args:
        birth_datetime: å‡ºç”Ÿæ—¶é—´ï¼ˆçœŸå¤ªé˜³æ—¶ï¼‰
        year_jie_list: å½“å¹´å’Œç›¸é‚»å¹´ä»½çš„èŠ‚æ°”åˆ—è¡¨
        direction: "é¡ºæ’" æˆ– "é€†æ’"
    
    Returns:
        {
            "qiyun_age": 3,
            "qiyun_date": "1987-11-07",
            "target_jie": "å¤§é›ª",
            "days_diff": 10.5,
            "calculation": "10.5å¤© Ã· 3 = 3.5å²ï¼Œå–æ•´ä¸º3å²"
        }
    """
    if direction == "é¡ºæ’":
        target_jie = find_next_jie(birth_datetime, year_jie_list)
    else:
        target_jie = find_previous_jie(birth_datetime, year_jie_list)
    
    # è®¡ç®—æ—¶é—´å·®ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰
    time_diff = abs((target_jie["datetime"] - birth_datetime).total_seconds())
    
    # è½¬æ¢ä¸ºå¤©æ•°ï¼ˆåŒ…å«å°æ•°ï¼‰
    days = time_diff / 86400
    
    # 3å¤© = 1å²
    years = days / 3
    
    # å–æ•´ï¼ˆå››èˆäº”å…¥ï¼‰
    qiyun_age = round(years)
    
    # å¦‚æœèµ·è¿å²æ•°ä¸º0ï¼ŒæŒ‰1å²èµ·è¿ï¼ˆå‘½ç†æƒ¯ä¾‹ï¼‰
    if qiyun_age == 0:
        qiyun_age = 1
    
    # è®¡ç®—èµ·è¿æ—¥æœŸï¼ˆç²—ç•¥ä¼°ç®—ï¼‰
    qiyun_date = birth_datetime + timedelta(days=365.25 * qiyun_age)
    
    return {
        "qiyun_age": qiyun_age,
        "qiyun_date": qiyun_date.strftime("%Y-%m-%d"),
        "target_jie": target_jie["name"],
        "days_diff": round(days, 2),
        "calculation": f"{round(days, 2)}å¤© Ã· 3 = {round(years, 2)}å²ï¼Œå–æ•´ä¸º{qiyun_age}å²"
    }


def find_next_jie(birth_datetime, year_jie_list):
    """
    æ‰¾åˆ°å‡ºç”Ÿåçš„ä¸‹ä¸€ä¸ª"èŠ‚"
    
    æ³¨æ„ï¼šåªæ‰¾"èŠ‚"ï¼Œä¸æ‰¾"æ°”"
    èŠ‚ï¼šç«‹æ˜¥ã€æƒŠè›°ã€æ¸…æ˜ã€ç«‹å¤ã€èŠ’ç§ã€å°æš‘ã€ç«‹ç§‹ã€ç™½éœ²ã€å¯’éœ²ã€ç«‹å†¬ã€å¤§é›ªã€å°å¯’
    """
    jie_names = ["ç«‹æ˜¥", "æƒŠè›°", "æ¸…æ˜", "ç«‹å¤", "èŠ’ç§", "å°æš‘", 
                 "ç«‹ç§‹", "ç™½éœ²", "å¯’éœ²", "ç«‹å†¬", "å¤§é›ª", "å°å¯’"]
    
    for jieqi in year_jie_list:
        if jieqi["name"] in jie_names and jieqi["datetime"] > birth_datetime:
            return jieqi
    
    # å¦‚æœå½“å¹´æ²¡æœ‰ï¼Œæ‰¾ä¸‹ä¸€å¹´çš„ç¬¬ä¸€ä¸ªèŠ‚ï¼ˆç«‹æ˜¥ï¼‰
    next_year_lichun = get_lichun(birth_datetime.year + 1)
    return {"name": "ç«‹æ˜¥", "datetime": next_year_lichun}


def find_previous_jie(birth_datetime, year_jie_list):
    """
    æ‰¾åˆ°å‡ºç”Ÿå‰çš„ä¸Šä¸€ä¸ª"èŠ‚"
    """
    jie_names = ["ç«‹æ˜¥", "æƒŠè›°", "æ¸…æ˜", "ç«‹å¤", "èŠ’ç§", "å°æš‘", 
                 "ç«‹ç§‹", "ç™½éœ²", "å¯’éœ²", "ç«‹å†¬", "å¤§é›ª", "å°å¯’"]
    
    # å€’åºæŸ¥æ‰¾
    for jieqi in reversed(year_jie_list):
        if jieqi["name"] in jie_names and jieqi["datetime"] < birth_datetime:
            return jieqi
    
    # å¦‚æœå½“å¹´æ²¡æœ‰ï¼Œæ‰¾ä¸Šä¸€å¹´çš„æœ€åä¸€ä¸ªèŠ‚ï¼ˆå°å¯’ï¼‰
    prev_year_xiaohan = get_xiaohan(birth_datetime.year - 1)
    return {"name": "å°å¯’", "datetime": prev_year_xiaohan}


def generate_dayun_sequence(month_gan, month_zhi, direction, qiyun_age):
    """
    ç”Ÿæˆå¤§è¿åºåˆ—
    
    Args:
        month_gan: æœˆæŸ±å¤©å¹²
        month_zhi: æœˆæŸ±åœ°æ”¯
        direction: "é¡ºæ’" æˆ– "é€†æ’"
        qiyun_age: èµ·è¿å²æ•°
    
    Returns:
        [
            {"age_range": "3-12å²", "start_age": 3, "end_age": 12, "gan": "ä¸™", "zhi": "å­", "pillar": "ä¸™å­"},
            {"age_range": "13-22å²", "start_age": 13, "end_age": 22, "gan": "ä¸", "zhi": "ä¸‘", "pillar": "ä¸ä¸‘"},
            ...
        ]
    """
    gan_sequence = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸']
    zhi_sequence = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥']
    
    # æ‰¾åˆ°æœˆæŸ±å¹²æ”¯çš„ç´¢å¼•
    current_gan_index = gan_sequence.index(month_gan)
    current_zhi_index = zhi_sequence.index(month_zhi)
    
    dayun_list = []
    current_age = qiyun_age
    
    for i in range(8):  # ä¸€èˆ¬æ’8æ­¥å¤§è¿
        if direction == "é¡ºæ’":
            gan_index = (current_gan_index + i + 1) % 10
            zhi_index = (current_zhi_index + i + 1) % 12
        else:  # é€†æ’
            gan_index = (current_gan_index - i - 1) % 10
            zhi_index = (current_zhi_index - i - 1) % 12
        
        gan = gan_sequence[gan_index]
        zhi = zhi_sequence[zhi_index]
        
        dayun_list.append({
            "age_range": f"{current_age}-{current_age + 9}å²",
            "start_age": current_age,
            "end_age": current_age + 9,
            "gan": gan,
            "zhi": zhi,
            "pillar": f"{gan}{zhi}"
        })
        
        current_age += 10
    
    return dayun_list
```

---

### æ¨¡å—3.2ï¼šå¤§è¿å‰å‡¶åˆ¤æ–­ ğŸ”¥ LLMæ¨ç†

**Promptè®¾è®¡ï¼š**

```markdown
ã€ä»»åŠ¡ã€‘åˆ†æå„æ­¥å¤§è¿çš„å‰å‡¶ï¼ˆ10å¹´ä¸€ä¸ªå‘¨æœŸï¼‰

ã€è¾“å…¥æ•°æ®ã€‘

ç”¨ç¥ä½“ç³»ï¼ˆå·²ç¡®å®šï¼‰ï¼š
- ç”¨ç¥ï¼šæœ¨
- å¿Œç¥ï¼šæ°´ï¼ˆé«˜ï¼‰ã€åœŸï¼ˆä¸­ï¼‰ã€é‡‘ï¼ˆä¸­ï¼‰

æ—¥ä¸»æ—ºè¡°ï¼šåå¼±

å¤§è¿åˆ—è¡¨ï¼š
1. 3-12å²ï¼šä¸™å­è¿
2. 13-22å²ï¼šä¸ä¸‘è¿
3. 23-32å²ï¼šæˆŠå¯…è¿
4. 33-42å²ï¼šå·±å¯è¿
5. 43-52å²ï¼šåºšè¾°è¿
...

---

ã€åˆ†æä»»åŠ¡ã€‘

è¯·é€ä¸€åˆ†ææ¯æ­¥å¤§è¿çš„10å¹´æ€»ä½“åŸºè°ƒï¼š

**ç¬¬1æ­¥å¤§è¿ï¼š3-12å² ä¸™å­è¿**

1. å¤©å¹²åˆ†æ
   - ä¸™ç«æ˜¯æ¯”è‚©ï¼Œå¸®èº«
   - å¯¹åå¼±çš„æ—¥ä¸»æ˜¯å‰æ˜¯å‡¶ï¼Ÿ

2. åœ°æ”¯åˆ†æ
   - å­æ°´æ˜¯ä¸ƒæ€ï¼ˆå¿Œç¥ï¼‰
   - å­æ°´ä¸åŸå±€çš„å…³ç³»ï¼ˆæœ‰æ— åˆå†²ï¼‰ï¼Ÿ

3. ç»¼åˆåˆ¤æ–­
   - è¿™10å¹´çš„æ•´ä½“åŸºè°ƒï¼šå‰/å¹³/å‡¶
   - å‰å‡¶ç­‰çº§ï¼šâ˜…â˜…â˜…â˜†â˜†ï¼ˆ1-5æ˜Ÿï¼‰
   - ä¸€å¥è¯æ¦‚æ‹¬ï¼ˆ50å­—ä»¥å†…ï¼‰

---

**ç¬¬2æ­¥å¤§è¿ï¼š13-22å² ä¸ä¸‘è¿**

ï¼ˆåŒæ ·çš„åˆ†ææ¡†æ¶ï¼‰

---

ã€è¾“å‡ºæ ¼å¼ã€‘
json
{
  "dayun_analysis": [
    {
      "age_range": "3-12å²",
      "pillar": "ä¸™å­",
      "rating": 3,
      "theme": "ç«¥å¹´æœŸï¼Œä¸™ç«å¸®èº«ç•¥æœ‰åŠ©åŠ›ï¼Œä½†å­æ°´å¿Œç¥å…‹åˆ¶ï¼Œæ•´ä½“å¹³ä¸­åä¸‹ï¼Œæ³¨æ„å¥åº·",
      "gan_analysis": "ä¸™ç«æ¯”è‚©ï¼Œå¸®èº«ï¼Œå°å‰",
      "zhi_analysis": "å­æ°´ä¸ƒæ€å¿Œç¥ï¼Œå…‹èº«ï¼Œä¸”å†²åˆæ ¹ï¼Œå‡¶",
      "overall": "å¤©å¹²å°å‰ï¼Œåœ°æ”¯å¤§å‡¶ï¼Œæ•´ä½“ä¸ä½³"
    },
    {
      "age_range": "13-22å²",
      "pillar": "ä¸ä¸‘",
      "rating": 3,
      "theme": "é’æ˜¥æœŸï¼Œä¸ç«å¸®èº«ï¼Œä½†ä¸‘åœŸæ™¦ç«ï¼Œå­¦ä¸šå‹åŠ›å¤§",
      "gan_analysis": "ä¸ç«åŠ«è´¢ï¼Œå¸®èº«ï¼Œå‰",
      "zhi_analysis": "ä¸‘åœŸé£Ÿç¥æ³„æ°”ï¼Œä¸”æ¹¿åœŸæ™¦ç«ï¼Œå¹³ä¸­åä¸‹",
      "overall": "å¤©å¹²å‰ï¼Œåœ°æ”¯å¹³ï¼Œæ•´ä½“ä¸­ç­‰"
    },
    {
      "age_range": "23-32å²",
      "pillar": "æˆŠå¯…",
      "rating": 4,
      "theme": "é’å¹´ä¸Šå‡æœŸï¼Œå¯…æœ¨ç”¨ç¥æœ‰åŠ›ï¼Œäº‹ä¸šå¼€å§‹å‘å±•",
      "gan_analysis": "æˆŠåœŸä¼¤å®˜æ³„æ°”ï¼Œå°å‡¶",
      "zhi_analysis": "å¯…æœ¨ç”¨ç¥ï¼Œç”Ÿæ‰¶æ—¥ä¸»ï¼Œå¤§å‰",
      "overall": "åœ°æ”¯å¤§å‰å‹è¿‡å¤©å¹²å°å‡¶ï¼Œæ•´ä½“è¾ƒå¥½"
    }
  ]
}

```

---


### æ¨¡å—3.3ï¼šæµå¹´åˆå†²æ£€æµ‹ âœ… ç®—æ³•å®ç°ï¼ˆæ‰©å……ç‰ˆï¼‰

**ğŸ”§ é‡è¦æ‰©å……ï¼šå¢åŠ å¤§è¿vsæµå¹´æ£€æµ‹**

```python
def check_yearly_interactions(original_bazi, dayun, liunian):
    """
    æ£€æµ‹æµå¹´ä¸åŸå±€ã€å¤§è¿çš„åˆ‘å†²åˆå®³
    
    Args:
        original_bazi: åŸå±€å…«å­—
        dayun: å½“å‰å¤§è¿ {"gan": "æˆŠ", "zhi": "å¯…"}
        liunian: æµå¹´ {"year": 2024, "gan": "ç”²", "zhi": "è¾°"}
    
    Returns:
        {
            "liunian_vs_yuanju": [...],  # æµå¹´ä¸åŸå±€
            "liunian_vs_dayun": [...],   # æµå¹´ä¸å¤§è¿
            "tianke_dichong": {...},      # å¤©å…‹åœ°å†²æ£€æµ‹
             "suiyun_binglin": {...}  # ğŸ†• æ–°å¢å²è¿å¹¶ä¸´æ£€æµ‹
        }
    """
    interactions = {
        "liunian_vs_yuanju": [],
        "liunian_vs_dayun": [],
        "tianke_dichong": {},
        "suiyun_binglin": {} 
    }
    
    # ========================================
    # 1. æµå¹´ vs åŸå±€
    # ========================================
    positions = {
        "å¹´æ”¯": original_bazi.year_zhi,
        "æœˆæ”¯": original_bazi.month_zhi,
        "æ—¥æ”¯": original_bazi.day_zhi,
        "æ—¶æ”¯": original_bazi.hour_zhi
    }
    
    for pos_name, original_zhi in positions.items():
        # å…­åˆæ£€æµ‹
        if is_liuhe(liunian["zhi"], original_zhi):
            hua_element = get_hehuan_element(liunian["zhi"], original_zhi)
            interactions["liunian_vs_yuanju"].append({
                "type": "å…­åˆ",
                "liunian_zhi": liunian["zhi"],
                "original_position": pos_name,
                "original_zhi": original_zhi,
                "hehuan_element": hua_element,
                "note": f"æµå¹´{liunian['zhi']}ä¸{pos_name}{original_zhi}å…­åˆåŒ–{hua_element}"
            })
        
        # å…­å†²æ£€æµ‹
        if is_liuchong(liunian["zhi"], original_zhi):
            interactions["liunian_vs_yuanju"].append({
                "type": "å…­å†²",
                "liunian_zhi": liunian["zhi"],
                "original_position": pos_name,
                "original_zhi": original_zhi,
                "note": f"æµå¹´{liunian['zhi']}ä¸{pos_name}{original_zhi}ç›¸å†²"
            })
    
    # ========================================
    # 2. æµå¹´ vs å¤§è¿ï¼ˆé‡è¦ï¼ï¼‰
    # ========================================
    
    # å…­åˆæ£€æµ‹
    if is_liuhe(liunian["zhi"], dayun["zhi"]):
        hua_element = get_hehuan_element(liunian["zhi"], dayun["zhi"])
        interactions["liunian_vs_dayun"].append({
            "type": "å…­åˆ",
            "note": f"æµå¹´{liunian['zhi']}ä¸å¤§è¿{dayun['zhi']}å…­åˆåŒ–{hua_element}"
        })
    
    # å…­å†²æ£€æµ‹
    if is_liuchong(liunian["zhi"], dayun["zhi"]):
        interactions["liunian_vs_dayun"].append({
            "type": "å…­å†²",
            "note": f"æµå¹´{liunian['zhi']}ä¸å¤§è¿{dayun['zhi']}ç›¸å†²"
        })
    
    # ğŸ†• å¤©å…‹åœ°å†²æ£€æµ‹ï¼ˆæœ€å‡¶ï¼ï¼‰
    tianke_dichong_result = check_tianke_dichong(
        {"gan": dayun["gan"], "zhi": dayun["zhi"]},
        {"gan": liunian["gan"], "zhi": liunian["zhi"]}
    )
    interactions["tianke_dichong"] = tianke_dichong_result
    
    
    # ğŸ†• å²è¿å¹¶ä¸´æ£€æµ‹ï¼ˆæœ€å‡¶ç»„åˆä¹‹ä¸€ï¼‰
    if dayun["gan"] == liunian["gan"] and dayun["zhi"] == liunian["zhi"]:
        interactions["suiyun_binglin"] = {
            "is_binglin": True,
            "pillar": f"{dayun['gan']}{dayun['zhi']}",
            "severity": "æå‡¶",
            "note": f"âš ï¸ å²è¿å¹¶ä¸´ï¼ˆå¤§è¿æµå¹´å¹²æ”¯å®Œå…¨ç›¸åŒï¼‰ï¼Œä¸»å¤§å˜åŠ¨ã€é‡å¤§äº‹ä»¶ï¼Œéœ€è°¨æ…åº”å¯¹"
        }
    else:
        interactions["suiyun_binglin"] = {"is_binglin": False}

    return interactions
```

---

### æ¨¡å—3.4ï¼šæµå¹´å‰å‡¶åˆ¤æ–­ ğŸ”¥ LLMæ¨ç†

**Promptè®¾è®¡ï¼š**

```markdown
ã€ä»»åŠ¡ã€‘åˆ†æå…·ä½“å¹´ä»½çš„å‰å‡¶ï¼ˆåœ¨å¤§è¿èƒŒæ™¯ä¸‹ï¼‰

ã€å½“å‰çŠ¶æ€ã€‘

å¤§è¿ï¼š23-32å² æˆŠå¯…è¿
- å¤§è¿è¯„çº§ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼ˆè¾ƒå¥½ï¼‰
- å¤§è¿ç‰¹ç‚¹ï¼šå¯…æœ¨ç”¨ç¥æœ‰åŠ›ï¼ŒæˆŠåœŸè™½æ³„æ°”ä½†æ•´ä½“åå‰
- è¿™æ˜¯ä¸€ä¸ªä¸Šå‡æœŸ

æµå¹´ï¼š2024å¹´ ç”²è¾°
- å¤©å¹²ï¼šç”²æœ¨ï¼ˆæ­£å°ï¼Œç”¨ç¥ï¼‰
- åœ°æ”¯ï¼šè¾°åœŸï¼ˆé£Ÿç¥ï¼Œå¿Œç¥ï¼‰

ç”¨ç¥ä½“ç³»ï¼š
- ç”¨ç¥ï¼šæœ¨
- å¿Œç¥ï¼šæ°´ï¼ˆé«˜ï¼‰ã€åœŸï¼ˆä¸­ï¼‰ã€é‡‘ï¼ˆä¸­ï¼‰

åŸå±€æ—ºè¡°ï¼šåå¼±ï¼ˆéœ€è¦ç”Ÿæ‰¶ï¼‰

---

ã€æµå¹´åˆå†²æ£€æµ‹ç»“æœã€‘ï¼ˆç®—æ³•æä¾›ï¼‰

æµå¹´ä¸åŸå±€ï¼š
- æ— å…­åˆ
- æ— å…­å†²
- æ— ä¸‰åˆ‘

æµå¹´ä¸å¤§è¿ï¼š
- æ— å…­åˆ
- æ— å…­å†²
- å¤©å…‹åœ°å†²æ£€æµ‹ï¼šå¦
- å²è¿å¹¶ä¸´ï¼šå¦

---

ã€åˆ†æä»»åŠ¡ã€‘

====================================================
   Step 0ï¼šæ—ºè¡°åŠ¨æ€å¤ç›˜ï¼ˆå…³é”®ï¼å¿…é¡»å…ˆåšï¼‰
====================================================

âš ï¸ é‡è¦æç¤ºï¼šå¤§è¿å’Œæµå¹´ä¼šæ”¹å˜æ—¥ä¸»çš„å¼ºå¼±çŠ¶æ€ï¼Œå¿…é¡»å…ˆé‡æ–°è¯„ä¼°ï¼

ã€åŸå±€çŠ¶æ€ã€‘
- æ—¥ä¸»æ—ºè¡°ï¼šåå¼±
- åŸå› ï¼šå†¬æœˆç«å›šï¼Œè™½æœ‰æœ¨ç”Ÿä½†æ•´ä½“åå¼±

ã€å½“å‰èƒ½é‡å åŠ ã€‘
- å¤§è¿ï¼šæˆŠå¯…
  * å¯…æœ¨ï¼šç”¨ç¥ï¼Œç”Ÿæ‰¶æ—¥ä¸»
  * æˆŠåœŸï¼šæ³„æ°”ï¼Œä½†å¯…æœ¨åŠ›é‡æ›´å¼º
  
- æµå¹´ï¼šç”²è¾°
  * ç”²æœ¨ï¼šé€å¹²ï¼Œç”¨ç¥ï¼Œç”Ÿæ‰¶æ—¥ä¸»
  * è¾°åœŸï¼šæ³„æ°”

- åˆå¹¶æ•ˆæœï¼š
  * å¤§è¿å¯…æœ¨ + æµå¹´ç”²æœ¨ = æœ¨çš„åŠ›é‡åœ¨è¿™ä¸ªæ—¶æ®µéå¸¸å¼º
  * æœ¨ç”Ÿç«ï¼Œæ—¥ä¸»å¾—åˆ°åŒé‡ç”Ÿæ‰¶

ã€é‡è¦åˆ¤æ–­ã€‘
è¯·åˆ†æï¼šåœ¨å¤§è¿+æµå¹´çš„åŒé‡ç”Ÿæ‰¶ä¸‹ï¼Œæ—¥ä¸»å½“å‰çš„å®é™…å¼ºå¼±çŠ¶æ€ï¼š

1. ä»ç„¶åå¼±ï¼Ÿ
   - æœ¨çš„åŠ›é‡è™½å¼ºï¼Œä½†ä»ä¸è¶³ä»¥è®©æ—¥ä¸»è½¬å¼º
   - ç”¨ç¥ä½“ç³»ä¸å˜ï¼šæœ¨ä»æ˜¯ç”¨ç¥

2. è½¬ä¸ºä¸­å’Œï¼Ÿ
   - æœ¨çš„ç”Ÿæ‰¶æ°åˆ°å¥½å¤„ï¼Œæ—¥ä¸»è¾¾åˆ°å¹³è¡¡
   - ç”¨ç¥è°ƒæ•´ï¼šæœ¨è½¬ä¸ºå¹³ç¥ï¼ˆä¸å–œä¸å¿Œï¼‰

3. è½¬ä¸ºåæ—ºï¼Ÿ
   - æœ¨çš„åŠ›é‡è¿‡å¼ºï¼Œæ—¥ä¸»åè€Œå¤ªæ—º
   - ç”¨ç¥è°ƒæ•´ï¼šæœ¨è½¬ä¸ºå¿Œç¥ï¼ˆè¿‡çŠ¹ä¸åŠï¼‰

ã€è¾“å‡ºè¦æ±‚ã€‘
è¯·æ˜ç¡®ç»™å‡ºï¼š
- æœ¬å¹´åº¦æ—¥ä¸»å®é™…å¼ºå¼±ï¼šåå¼± / ä¸­å’Œ / åæ—º
- ç”¨ç¥è°ƒæ•´ï¼šæœ¨ï¼ˆç”¨ç¥/å¹³ç¥/å¿Œç¥ï¼‰
- è°ƒæ•´ç†ç”±ï¼šï¼ˆ100å­—ä»¥å†…ï¼‰

ğŸ”» å®Œæˆæ—ºè¡°å¤ç›˜åï¼Œå†è¿›è¡Œæµå¹´åˆ†æ ğŸ”»

====================================================
   Step 1ï¼šå¤§è¿+æµå¹´è”åŠ¨åˆ†æ
====================================================

åŸºäºStep 0ç¡®å®šçš„æ—ºè¡°çŠ¶æ€ï¼Œåˆ†æå¤§è¿ä¸æµå¹´çš„äº’åŠ¨ï¼š

**1. å¤©å¹²äº’åŠ¨**

å¤§è¿æˆŠåœŸ vs æµå¹´ç”²æœ¨ï¼š
- ç”²æœ¨å…‹æˆŠåœŸï¼ˆç”¨ç¥åˆ¶å¿Œç¥ï¼Œå‡è®¾æœ¨ä»æ˜¯ç”¨ç¥ï¼‰
- è¿™æ˜¯å¥½äº‹è¿˜æ˜¯åäº‹ï¼Ÿ
- å…‹çš„åŠ›åº¦å¦‚ä½•ï¼Ÿ

**2. åœ°æ”¯äº’åŠ¨**

å¤§è¿å¯…æœ¨ vs æµå¹´è¾°åœŸï¼š
- å¯…æœ¨æ˜¯ç”¨ç¥ï¼ˆå‡è®¾ï¼‰ï¼Œè¾°åœŸæ˜¯å¿Œç¥
- è¾°åœŸä¼šä¸ä¼šæŸä¼¤å¯…æœ¨ï¼Ÿ
- å¯…è¾°ä¹‹é—´æœ‰æ— ç‰¹æ®Šå…³ç³»ï¼Ÿï¼ˆæŸ¥ç®—æ³•æä¾›çš„åˆå†²ç»“æœï¼‰

**3. ç»¼åˆç¯å¢ƒ**

- å¤©å¹²ï¼šç”²æœ¨é€å¹²çš„åŠ›é‡
- åœ°æ”¯ï¼šå¯…æœ¨ + è¾°åœŸçš„ç»„åˆ
- æ•´ä½“å¯¹æ—¥ä¸»æ˜¯å¢ç›Šè¿˜æ˜¯å‡æŸï¼Ÿ

====================================================
   Step 2ï¼šæµå¹´å¹²æ”¯åˆ†ä½“åˆ†æ
====================================================

**æµå¹´å¤©å¹²ï¼šç”²æœ¨**

1. ç”²æœ¨å¯¹æ—¥ä¸»çš„ä½œç”¨ï¼š
   - ç”²æœ¨æ˜¯æ­£å°ï¼ˆç”Ÿæ‰¶æ—¥ä¸»ï¼‰
   - é€å‡ºåŠ›é‡å¦‚ä½•ï¼Ÿï¼ˆå¤©å¹²åŠ›é‡ç›´æ¥ï¼‰

2. ç”²æœ¨çš„å®é™…æ„ä¹‰ï¼š
   - äº‹ä¸šï¼šè´µäººã€ä¸Šå¸ã€é•¿è¾ˆ
   - å­¦ä¹ ï¼šå­¦ä¹ æœºä¼šã€åŸ¹è®­
   - å¥åº·ï¼šç²¾ç¥çŠ¶æ€ã€ç¡çœ 

**æµå¹´åœ°æ”¯ï¼šè¾°åœŸ**

1. è¾°åœŸå¯¹æ—¥ä¸»çš„ä½œç”¨ï¼š
   - è¾°åœŸæ˜¯é£Ÿç¥ï¼ˆæ³„æ—¥ä¸»æ°”ï¼‰
   - è¾°åœŸè—å¹²ï¼šæˆŠåœŸã€ä¹™æœ¨ã€ç™¸æ°´
   - å“ªä¸ªè—å¹²åœ¨æœ¬å¹´æœ€æœ‰å½±å“ï¼Ÿ

2. è¾°åœŸçš„å®é™…æ„ä¹‰ï¼š
   - äº‹ä¸šï¼šè¡¨è¾¾ã€å±•ç¤ºã€åˆ›æ„
   - è´¢è¿ï¼šæŠ•èµ„ã€æ¶ˆè´¹
   - å¥åº·ï¼šè„¾èƒƒã€æ¶ˆåŒ–ç³»ç»Ÿ

====================================================
   Step 3ï¼šç»¼åˆåˆ¤æ–­ä¸åˆ†é¢†åŸŸåˆ†æ
====================================================

ã€æ•´ä½“åŸºè°ƒã€‘

åœ¨å¤§è¿æˆŠå¯…ï¼ˆæ•´ä½“è¾ƒå¥½ï¼‰çš„èƒŒæ™¯ä¸‹ï¼š
- æœ¬å¹´æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Ÿè¿˜æ˜¯ç¾ä¸­ä¸è¶³ï¼Ÿ
- æœ¬å¹´çš„ä¸»æ—‹å¾‹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼‰
- å‰å‡¶è¯„çº§ï¼š1-5æ˜Ÿ

ã€åˆ†é¢†åŸŸåˆ†æã€‘

**1. äº‹ä¸šè¿**
- ç”²æœ¨é€å¹²ï¼ˆè´µäººï¼‰+ è¾°åœŸï¼ˆæ‰åè¡¨è¾¾ï¼‰
- ç»¼åˆåˆ¤æ–­ï¼šï¼Ÿ
- å…·ä½“å»ºè®®ï¼šï¼Ÿ

**2. è´¢è¿**
- æœ¨æ—ºç”Ÿç«ï¼Œç«ç”ŸåœŸï¼ˆè´¢ï¼‰
- ä½†è¾°åœŸæ˜¯å¦ä¸ºè´¢è¦çœ‹ç”¨ç¥è°ƒæ•´
- ç»¼åˆåˆ¤æ–­ï¼šï¼Ÿ
- å…·ä½“å»ºè®®ï¼šï¼Ÿ

**3. å¥åº·**
- æœ¨æ—ºå¯¹æ—¥ä¸»çš„å½±å“
- è¾°åœŸå¯¹è„¾èƒƒçš„å½±å“
- éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ

**4. æ„Ÿæƒ…**
- å¦‚é€‚ç”¨
- ç»¼åˆåˆ¤æ–­ï¼šï¼Ÿ

ã€æœˆä»½æç¤ºã€‘
å“ªäº›æœˆä»½è¿åŠ¿æœ€å¥½ï¼Ÿå“ªäº›æœˆä»½éœ€è°¨æ…ï¼Ÿ
ï¼ˆæç¤ºï¼šæœ¨æ—ºæœˆä»½å¦‚å¯…å¯æœˆã€æ°´æ—ºæœˆä»½å¦‚äº¥å­æœˆç­‰ï¼‰

ã€è¡ŒåŠ¨å»ºè®®ã€‘
åŸºäºæœ¬å¹´ç‰¹ç‚¹ï¼Œç»™å‡º3-5æ¡å¯æ‰§è¡Œå»ºè®®

---

ã€è¾“å‡ºæ ¼å¼ã€‘
json
{
  "year": 2024,
  "dayun_context": "æˆŠå¯…è¿æ•´ä½“è¾ƒå¥½ï¼Œå¤„äºä¸Šå‡æœŸ",
  
  "dynamic_wangshuai": {
    "current_strength": "ä¸­å’Œ",
    "yongshen_adjustment": "æœ¨è½¬ä¸ºå¹³ç¥",
    "reason": "å¤§è¿æµå¹´æœ¨æ—ºï¼Œæ—¥ä¸»ç”±åå¼±è½¬ä¸ºä¸­å’Œï¼Œæœ¨ä»ç”¨ç¥è½¬ä¸ºå¹³ç¥"
  },
  
  "liunian_theme": "åœ¨å¥½è¿ä¸­çš„å¹³ç¨³å¹´ä»½ï¼Œæœ¨æ—ºä½†å·²ä¸éœ€è¦è¿‡å¤šç”Ÿæ‰¶ï¼Œä¸»ç»´æŒç°çŠ¶",
  "overall_rating": 4,
  
  "detailed_analysis": {
    "career": "ç”²æœ¨é€å¹²ï¼Œå·¥ä½œæœ‰è´µäººç›¸åŠ©ï¼Œä½†ä¸å®œè¿‡äºæ¿€è¿›ï¼Œç¨³æ‰ç¨³æ‰“ä¸ºå®œ",
    "wealth": "æ”¶å…¥ç¨³å®šï¼Œè¾°åœŸé£Ÿç¥ä¸»æ¶ˆè´¹ï¼Œå¼€æ”¯è¾ƒå¤šï¼Œæ³¨æ„èŠ‚çº¦",
    "health": "æ•´ä½“è‰¯å¥½ï¼Œä½†æœ¨æ—ºéœ€æ³¨æ„è‚æ°”ï¼Œè¾°åœŸæ³¨æ„è„¾èƒƒï¼Œå°‘åƒç”Ÿå†·",
    "relationship": "æ„Ÿæƒ…å¹³ç¨³ï¼Œå•èº«è€…æœ‰æ¡ƒèŠ±æœºä¼šä½†ä¸å¼º"
  },
  
  "monthly_tips": "å†œå†äºŒæœˆï¼ˆå¯æœˆï¼‰ã€ä¸‰æœˆï¼ˆè¾°æœˆï¼‰è¿åŠ¿æœ€ä½³ï¼Œå†œå†åæœˆï¼ˆäº¥æœˆï¼‰ã€åä¸€æœˆï¼ˆå­æœˆï¼‰éœ€è°¨æ…ï¼ˆæ°´æ—ºå…‹ç«ï¼‰",
  
  "advice": [
    "ä¸»åŠ¨ç»´æŠ¤äººé™…å…³ç³»ï¼Œè´µäººè¿ä½³",
    "è´¢åŠ¡é‡å…¥ä¸ºå‡ºï¼Œé¿å…å†²åŠ¨æ¶ˆè´¹",
    "æ³¨æ„è‚æ°”èˆ’ç•…ï¼Œä¿æŒå¿ƒæƒ…æ„‰æ‚¦",
    "å·¥ä½œç¨³ä¸­æ±‚è¿›ï¼Œä¸å®œå†’é™©"
  ]
}

```


---


## ç¬¬å››é˜¶æ®µï¼šè¾“å‡ºå±‚

### æ¨¡å—4.1ï¼šç™½è¯ç¿»è¯‘ä¸å®‰å…¨è¿‡æ»¤ ğŸ”¥ LLMå¤„ç†

**è¾“å‡ºåŸåˆ™ï¼š**

1. **æœ¯è¯­ç™½è¯åŒ–**
   ```
   æ¯”è‚©å¤ºè´¢ â†’ ä»Šå¹´å¯èƒ½å› æœ‹å‹æˆ–åˆä¼™äººå¯¼è‡´è´¢åŠ¡æ”¯å‡º
   ä¸ƒæ€æ”»èº« â†’ ä»Šå¹´å‹åŠ›è¾ƒå¤§ï¼Œéœ€æ³¨æ„æƒ…ç»ªç®¡ç†
   é£Ÿç¥åˆ¶æ€ â†’ å·¥ä½œèƒ½åŠ›å¾—åˆ°å‘æŒ¥ï¼Œèƒ½åŒ–è§£å‹åŠ›
   ```

2. **æå“å†…å®¹è½¬åŒ–**
   ```
   âŒ "è¡€å…‰ä¹‹ç¾"
   âœ“ "æ³¨æ„å®‰å…¨ï¼Œé¿å…å±é™©è¿åŠ¨ï¼Œå®šæœŸä½“æ£€"
   
   âŒ "ä»Šå¹´å¿…æœ‰å®˜é"
   âœ“ "ä»Šå¹´å®¹æ˜“ä¸æƒå¨äººå£«äº§ç”Ÿæ‘©æ“¦ï¼Œæ³¨æ„æ²Ÿé€šæ–¹å¼"
   ```

3. **æ–¹ä½å†²çªæç¤º**
   ```
   âŒ "æ‚¨é€‚åˆä¸œæ–¹"
   âœ“ "æ‚¨é€‚åˆå¤šæ¥è§¦ä¸œæ–¹ã€ä¸œå—æ–¹çš„èƒ½é‡ï¼Œä½†å¦‚æœå…«å­—ä¸­æœ¨å—ä¸¥é‡åˆ‘å†²ï¼Œéœ€å…·ä½“åˆ†æ"
   ```

---

### æ¨¡å—4.2ï¼šæœ€ç»ˆæŠ¥å‘Šæ¨¡æ¿

```markdown
# æ‚¨çš„å…«å­—åˆ†ææŠ¥å‘Š

## åŸºæœ¬ä¿¡æ¯
- å‡ºç”Ÿæ—¶é—´ï¼š1984å¹´11æœˆ7æ—¥ 22:30ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
- çœŸå¤ªé˜³æ—¶ï¼š1984å¹´11æœˆ7æ—¥ 22:32
- å‡ºç”Ÿåœ°ï¼šåŒ—äº¬
- æ€§åˆ«ï¼šç”·

## å››æŸ±å…«å­—
```
å¹´æŸ±ï¼šç”²å­
æœˆæŸ±ï¼šä¹™äº¥
æ—¥æŸ±ï¼šä¸™åˆ
æ—¶æŸ±ï¼šå·±äº¥
```

---

## æ‚¨çš„å‘½ç†ç‰¹ç‚¹

### æ€§æ ¼ç‰¹è´¨
æ‚¨æ˜¯ä¸€ä¸ªæ¸©å’Œã€æœ‰è´£ä»»å¿ƒã€é‡æ„Ÿæƒ…çš„äººï¼Œæ€è€ƒé—®é¢˜æ·±å…¥ç»†è‡´ã€‚

### èƒ½é‡çŠ¶æ€
æ‚¨çš„ç”Ÿå‘½èƒ½é‡å±äº**åå¼±å‹**
- å°±åƒå†¬å¤©çš„ç«è‹—ï¼Œéœ€è¦ä¸æ–­è¡¥å……èƒ½é‡
- é€‚åˆç¨³å®šå‘å±•ï¼Œä¸é€‚åˆé«˜å¼ºåº¦ç«äº‰

### äº”è¡Œåˆ†å¸ƒ
```
æœ¨ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 30%
ç« â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 11%
åœŸ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 13%
é‡‘ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0%ï¼ˆç¼ºå¤±ï¼‰
æ°´ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 46%
```

---

## äººç”Ÿå»ºè®®

### å¼€è¿æ–¹å‘

**ğŸ§­ æœ‰åˆ©æ–¹ä½ï¼š** ä¸œæ–¹ã€ä¸œå—æ–¹  
**ğŸ¨ æœ‰åˆ©é¢œè‰²ï¼š** ç»¿è‰²ç³»ã€é’è‰²ç³»  
**ğŸŒ± æœ‰åˆ©å…ƒç´ ï¼š** æœ¨

### é€‚åˆçš„èŒä¸šæ–¹å‘

â­â­â­â­â­ **å¼ºçƒˆæ¨èï¼š**
- æ–‡åŒ–æ•™è‚²ï¼ˆæ•™å¸ˆã€åŸ¹è®­å¸ˆï¼‰
- æ–‡å­—åˆ›ä½œï¼ˆç¼–è¾‘ã€ä½œå®¶ï¼‰
- åŒ»è¯å¥åº·ï¼ˆä¸­åŒ»ã€æŠ¤ç†ï¼‰

â­â­â­ **å¯ä»¥è€ƒè™‘ï¼š**
- è®¾è®¡åˆ›æ„
- å’¨è¯¢æœåŠ¡

âŒ **ä¸å¤ªé€‚åˆï¼š**
- é‡‘èè¯åˆ¸ï¼ˆç«äº‰å‹åŠ›å¤§ï¼‰
- é‡‘å±åˆ¶é€ ï¼ˆäº”è¡Œä¸åˆ©ï¼‰

---

## å¤§è¿æµå¹´

### ä¸€ç”Ÿè¿åŠ¿æ¦‚è§ˆ

**3-12å²ï¼ˆç«¥å¹´æœŸï¼‰** â˜…â˜…â˜…â˜†â˜†  
å®¶åº­ç¯å¢ƒå°šå¯ï¼Œä½†èº«ä½“ç•¥å¼±

**13-22å²ï¼ˆé’æ˜¥æœŸï¼‰** â˜…â˜…â˜…â˜†â˜†  
å­¦ä¸šå¹³ç¨³ï¼Œæ€§æ ¼å…»æˆæœŸ

**23-32å²ï¼ˆé’å¹´æœŸï¼‰** â˜…â˜…â˜…â˜…â˜†  
**äººç”Ÿä¸Šå‡æœŸ**ï¼Œäº‹ä¸šå¼€å§‹å‘å±•

**33-42å²ï¼ˆä¸­å¹´æœŸï¼‰** â˜…â˜…â˜…â˜…â˜…  
**é»„é‡‘æœŸ**ï¼Œäº‹ä¸šè´¢è¿ä¿±ä½³

---

### è¿‘æœŸè¿åŠ¿ï¼ˆ2024-2028ï¼‰

#### 2024å¹´ï¼ˆç”²è¾°å¹´ï¼‰â˜…â˜…â˜…â˜…â˜†

**æ•´ä½“ï¼š** è¾ƒå¥½çš„ä¸€å¹´  
**äº‹ä¸šï¼š** æœ‰è´µäººç›¸åŠ©ï¼ŒæŠŠæ¡æœºä¼š  
**è´¢è¿ï¼š** æ”¶å…¥å¢åŠ ï¼Œæ³¨æ„èŠ‚çº¦  
**å¥åº·ï¼š** æ³¨æ„è„¾èƒƒï¼Œé€‚åº¦è¿åŠ¨  
**æ„Ÿæƒ…ï¼š** å¹³ç¨³å‘å±•

---

**ç¥æ‚¨å‰ç¨‹ä¼¼é”¦ï¼Œä¸€å¸†é£é¡ºï¼**
```

---

## ã€æœ€ç»ˆæ¶æ„å›¾ã€‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ä¸€å±‚ï¼šç®—æ³•å±‚ï¼ˆç¡®å®šæ€§æ•°æ®ï¼‰       â”‚
â”‚                                           â”‚
â”‚  [æ•°æ®é‡‡é›†] â†’ [çœŸå¤ªé˜³æ—¶] â†’ [å››æŸ±æ’ç›˜]      â”‚
â”‚       â†“                                   â”‚
â”‚  [åœ°æ”¯è—å¹²] â†’ [åç¥æ ‡æ³¨] â†’ [åˆ‘å†²æ£€æµ‹]      â”‚
â”‚       â†“                                   â”‚
â”‚  [äº”è¡Œç»Ÿè®¡] â†’ [æŸ¥è¡¨æ•°æ®] â†’ [å¼‚å¸¸æ ‡è®°]      â”‚
â”‚       â†“                                   â”‚
â”‚  ğŸ†• [æœˆä»¤å¸ä»¤ç¥] â†’ [å¤©å…‹åœ°å†²æ£€æµ‹]          â”‚
â”‚                                           â”‚
â”‚  è¾“å‡ºï¼šç»“æ„åŒ–JSONæ•°æ®                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ç¬¬äºŒå±‚ï¼šLLMæ¨ç†å±‚ï¼ˆå®šæ€§åˆ†æï¼‰        â”‚
â”‚                                           â”‚
â”‚  [ç¬¬ä¸€è½®] æ ¼å±€å®šæ€§                         â”‚
â”‚      â”œâ”€ ç‰¹æ®Šæ ¼å±€ â†’ é¡ºåŠ¿åˆ†æ               â”‚
â”‚      â””â”€ æ™®é€šæ ¼å±€ â†“                        â”‚
â”‚                                           â”‚
â”‚  [ç¬¬äºŒè½®] æ—ºè¡°åˆ†æï¼ˆ6çº§åˆ†ç±»ï¼‰              â”‚
â”‚      â”œâ”€ å¾—ä»¤åˆ†æï¼ˆåŸºäºæœˆä»¤å¸ä»¤ç¥ï¼‰         â”‚
â”‚      â”œâ”€ å¾—åœ°åˆ†æ                          â”‚
â”‚      â””â”€ å¾—åŠ¿åˆ†æ                          â”‚
â”‚           â†“                               â”‚
â”‚  [ç¬¬ä¸‰è½®] ç”¨ç¥ç»¼åˆ                         â”‚
â”‚      â”œâ”€ æ‰¶æŠ‘æ³•                            â”‚
â”‚      â”œâ”€ è°ƒå€™æ³•                            â”‚
â”‚      â”œâ”€ é€šå…³æ³•                            â”‚
â”‚      â””â”€ ä¸‰æ³•ç»¼åˆ                          â”‚
â”‚           â†“                               â”‚
â”‚  [ç¬¬å››è½®] å¤§è¿æµå¹´                         â”‚
â”‚                                           â”‚
â”‚  è¾“å‡ºï¼šç»“æ„åŒ–ç»“è®º                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       ç¬¬ä¸‰å±‚ï¼šè¾“å‡ºå±‚ï¼ˆç”¨æˆ·å‹å¥½ï¼‰            â”‚
â”‚                                           â”‚
â”‚  [æœ¯è¯­ç¿»è¯‘] â†’ [å®‰å…¨è¿‡æ»¤] â†’ [æŠ¥å‘Šç”Ÿæˆ]      â”‚
â”‚                                           â”‚
â”‚  è¾“å‡ºï¼šç™½è¯æ–‡æŠ¥å‘Š                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ã€æ ¸å¿ƒè®¾è®¡åŸåˆ™ã€‘

### âœ… ç®—æ³•çš„èŒè´£ï¼ˆåš"ä¹¦è®°å‘˜"ï¼‰

1. **æä¾›å®¢è§‚äº‹å®**
   - å››æŸ±å¹²æ”¯
   - åœ°æ”¯è—å¹²ï¼ˆå­˜åœ¨æ€§ï¼‰
   - èŠ‚æ°”æ—¶åˆ»

2. **æä¾›æŸ¥è¯¢ç»“æœ**
   - æ—ºç›¸ä¼‘å›šæ­»è¡¨
   - åäºŒé•¿ç”Ÿè¡¨
   - è°ƒå€™é€ŸæŸ¥è¡¨
   - ğŸ†• æœˆä»¤å¸ä»¤ç¥ï¼ˆå…³é”®ï¼ï¼‰

3. **æ ‡æ³¨å…³ç³»å­˜åœ¨æ€§**
   - åˆ‘å†²åˆå®³ï¼ˆä½ç½®+ç±»å‹ï¼‰
   - ğŸ†• å¤©å…‹åœ°å†²ï¼ˆæœ€å‡¶ç»„åˆï¼‰

4. **ç»Ÿè®¡æ•°æ®**
   - äº”è¡Œåˆ†å¸ƒï¼ˆè¾…åŠ©å‚è€ƒï¼‰
   - å¼‚å¸¸ç‰¹å¾ï¼ˆæ ¼å±€é¢„è­¦ï¼‰

### âŒ ç®—æ³•ä¸åšçš„äº‹

- ä¸è®¡ç®—"åŠ›åº¦ç³»æ•°"ï¼ˆä¸»è§‚åˆ¤æ–­ï¼‰
- ä¸è®¡ç®—"æˆåŠŸç‡ç™¾åˆ†æ¯”"ï¼ˆä¼ªç²¾ç¡®ï¼‰
- ä¸é¢„åˆ¤å‰å‡¶ï¼ˆå¤æ‚æ¨ç†ï¼‰
- ä¸æ›¿ä»£LLMæ€è€ƒ

---

### âœ… LLMçš„èŒè´£ï¼ˆåš"å‘½ç†å¸ˆ"ï¼‰

1. **å®šæ€§åˆ†æ**
   - æ ¼å±€åˆ¤æ–­
   - æ—ºè¡°è¯„ä¼°ï¼ˆ6çº§åˆ†ç±»ï¼‰
   - ç”¨ç¥é€‰æ‹©

2. **ç»¼åˆæ¨ç†**
   - ä¸‰æ³•ç»¼åˆï¼ˆæ‰¶æŠ‘+è°ƒå€™+é€šå…³ï¼‰
   - å†²çªä»²è£
   - æµå¹´åˆ¤æ–­

3. **äººæ€§åŒ–è¡¨è¾¾**
   - ç™½è¯ç¿»è¯‘
   - å®‰å…¨è¿‡æ»¤
   - å»ºè®®ç”Ÿæˆ

### âŒ LLMä¸åšçš„äº‹

- ä¸æŸ¥è¡¨ï¼ˆå®¹æ˜“å¹»è§‰ï¼‰
- ä¸è®¡ç®—èŠ‚æ°”ï¼ˆç²¾åº¦é—®é¢˜ï¼‰
- ä¸åšç®€å•ç»Ÿè®¡ï¼ˆç®—æ³•æ›´å‡†ç¡®ï¼‰

---
